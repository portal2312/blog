<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Network containers | Portal2312&#39;s blog</title>
<meta name="generator" content="Jekyll v3.8.6" />
<meta property="og:title" content="Network containers" />
<meta name="author" content="mkkim" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="사용자 가이드를 통해 작업하는 중이면 단순한 애플리케이션을 구축하고 실행했습니다. 당신은 또한 당신 자신의 이미지를 만들었습니다. 이 섹션에서는 컨테이너를 네트워크하는 방법을 설명합니다." />
<meta property="og:description" content="사용자 가이드를 통해 작업하는 중이면 단순한 애플리케이션을 구축하고 실행했습니다. 당신은 또한 당신 자신의 이미지를 만들었습니다. 이 섹션에서는 컨테이너를 네트워크하는 방법을 설명합니다." />
<link rel="canonical" href="/blog/docs/develop/A-M/CaaS/docker/1_Guides/2_Get_started/2_Learn_by_example/Network_containers.html" />
<meta property="og:url" content="/blog/docs/develop/A-M/CaaS/docker/1_Guides/2_Get_started/2_Learn_by_example/Network_containers.html" />
<meta property="og:site_name" content="Portal2312&#39;s blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-12-02T16:38:51+09:00" />
<script type="application/ld+json">
{"description":"사용자 가이드를 통해 작업하는 중이면 단순한 애플리케이션을 구축하고 실행했습니다. 당신은 또한 당신 자신의 이미지를 만들었습니다. 이 섹션에서는 컨테이너를 네트워크하는 방법을 설명합니다.","headline":"Network containers","dateModified":"2019-12-02T16:38:51+09:00","datePublished":"2019-12-02T16:38:51+09:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"/blog/docs/develop/A-M/CaaS/docker/1_Guides/2_Get_started/2_Learn_by_example/Network_containers.html"},"url":"/blog/docs/develop/A-M/CaaS/docker/1_Guides/2_Get_started/2_Learn_by_example/Network_containers.html","author":{"@type":"Person","name":"mkkim"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href='/blog/assets/main.css'><link type="application/atom+xml" rel="alternate" href="/blog/feed.xml" title="Portal2312's blog" /><script>
if(!(window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1")) {
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-113063601-1', 'auto');
  ga('send', 'pageview');
}
</script>
  
<script src='/blog/dist/js/common.bundle.js'></script>
</head>
<body><header class="site-header" role="banner">
  <div class="wrapper">
    <a class="site-title" rel="author" href="/blog/">Portal2312&#39;s blog</a>
    <nav class="site-nav">
    <input type="checkbox" id="nav-trigger" class="nav-trigger" />
    <label for="nav-trigger">
      <span class="menu-icon">
        <svg viewBox="0 0 18 15" width="18px" height="15px">
          <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
        </svg>
      </span>
    </label>

    <div class="trigger"><a class="page-link" href="/blog/about.html">
            About
          </a><a class="page-link" href="/blog/posts.html">
            Posts
          </a><a class="page-link" href="/blog/history.html">
            History
          </a><a class="page-link" href="/blog/docs/index.html">
            Docs
          </a></div>
  </nav>
  </div>
  <div class="scroll-indicator-container">
  <div class="scroll-indicator-bar" id="scrollIndicatorBar"></div>
</div>

</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <h1>Network containers</h1>

  <div>
    <h2>Table of contents</h2>
    <ul class="section-nav">
<li class="toc-entry toc-h2"><a href="#launch-a-container-on-the-default-network">Launch a container on the default network</a></li>
<li class="toc-entry toc-h2"><a href="#create-your-own-bridge-network">Create your own bridge network</a></li>
<li class="toc-entry toc-h2"><a href="#add-containers-to-a-network">Add containers to a network</a></li>
<li class="toc-entry toc-h2"><a href="#reference">Reference</a></li>
</ul><p>사용자 가이드를 통해 작업하는 중이면 단순한 애플리케이션을 구축하고 실행했습니다.
당신은 또한 당신 자신의 이미지를 만들었습니다.
이 섹션에서는 컨테이너를 네트워크하는 방법을 설명합니다.</p>

<h2 id="launch-a-container-on-the-default-network">
<a class="anchor" href="#launch-a-container-on-the-default-network" aria-hidden="true"><span class="octicon octicon-link"></span></a>Launch a container on the default network</h2>

<p>Docker는 <strong>network drivers</strong> 를 사용하여 네트워킹 컨테이너를 지원합니다.
기본적으로 Docker는 사용자, <code>bridge</code> 및 <code>overlay</code> 드라이버 용으로 두 개의 네트워크 드라이버를 제공합니다.
나만의 드라이버를 만들 수 있지만 고급 작업인 네트워크 드라이버 플러그인을 작성할 수도 있습니다.</p>

<p>Docker Engine을 설치할 때 마다 자동으로 세 개의 기본 네트워크가 포함됩니다.
당신은 그들을 나열할 수 있습니다:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>docker network <span class="nb">ls

</span>NETWORK ID          NAME                DRIVER              SCOPE
b2b9cfda32ed        bridge              bridge              <span class="nb">local
</span>d1f995986ee2        docker_gwbridge     bridge              <span class="nb">local
</span>51c91d09ad62        host                host                <span class="nb">local
</span>7af9c0605c82        none                null                <span class="nb">local</span>
</code></pre></div>
<p><code>bridge</code> 라는 네트워크는 특별한 네트워크입니다.
그렇지 않으면 Docker는 항상이 네트워크에서 컨테이너를 시작합니다. 지금 시도해보십시오:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>docker run <span class="nt">-itd</span> <span class="nt">--name</span><span class="o">=</span>networktest ubuntu

Unable to find image <span class="s1">'ubuntu:latest'</span> locally
latest: Pulling from library/ubuntu
50aff78429b1: Pull <span class="nb">complete
</span>f6d82e297bce: Pull <span class="nb">complete
</span>275abb2c8a6f: Pull <span class="nb">complete
</span>9f15a39356d6: Pull <span class="nb">complete
</span>fc0342a94c89: Pull <span class="nb">complete
</span>Digest: sha256:b2b7d60b7ea23a11566eed55aac136afdbc563cabcbbf9bc0b85094cc3776a5a
Status: Downloaded newer image <span class="k">for </span>ubuntu:latest
f6c02a7b0585896bc1327b8754cec9d2c2c423c907a2eb23145d9789de8c43ae
</code></pre></div>
<p><img src="/Documents/Develop/CaaS(Containers_as_a_Service)/Docker/img/bridge1.png" alt="bridge1"></p>

<p>네트워크를 검사하면 컨테이너의 IP 주소를 쉽게 찾을 수 있습니다.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>docker network inspect bridge

<span class="o">[</span>
    <span class="o">{</span>
        <span class="s2">"Name"</span>: <span class="s2">"bridge"</span>,
        <span class="s2">"Id"</span>: <span class="s2">"b2b9cfda32ed1fad7052a679de9be9e1804baf330c018c94607ea730fb010284"</span>,
        <span class="s2">"Created"</span>: <span class="s2">"2017-12-15T08:55:01.770280163+09:00"</span>,
        <span class="s2">"Scope"</span>: <span class="s2">"local"</span>,
        <span class="s2">"Driver"</span>: <span class="s2">"bridge"</span>,
        <span class="s2">"EnableIPv6"</span>: <span class="nb">false</span>,
        <span class="s2">"IPAM"</span>: <span class="o">{</span>
            <span class="s2">"Driver"</span>: <span class="s2">"default"</span>,
            <span class="s2">"Options"</span>: null,
            <span class="s2">"Config"</span>: <span class="o">[</span>
                <span class="o">{</span>
                    <span class="s2">"Subnet"</span>: <span class="s2">"172.17.0.0/16"</span>,
                    <span class="s2">"Gateway"</span>: <span class="s2">"172.17.0.1"</span>
                <span class="o">}</span>
            <span class="o">]</span>
        <span class="o">}</span>,
        <span class="s2">"Internal"</span>: <span class="nb">false</span>,
        <span class="s2">"Attachable"</span>: <span class="nb">false</span>,
        <span class="s2">"Ingress"</span>: <span class="nb">false</span>,
        <span class="s2">"ConfigFrom"</span>: <span class="o">{</span>
            <span class="s2">"Network"</span>: <span class="s2">""</span>
        <span class="o">}</span>,
        <span class="s2">"ConfigOnly"</span>: <span class="nb">false</span>,
        <span class="s2">"Containers"</span>: <span class="o">{</span>
            <span class="s2">"f6c02a7b0585896bc1327b8754cec9d2c2c423c907a2eb23145d9789de8c43ae"</span>: <span class="o">{</span>
                <span class="s2">"Name"</span>: <span class="s2">"networktest"</span>,
                <span class="s2">"EndpointID"</span>: <span class="s2">"39268ef2e28c152e3359e179e79a864e8bb6b93084a6e50971ca621a96c78d24"</span>,
                <span class="s2">"MacAddress"</span>: <span class="s2">"02:42:ac:11:00:02"</span>,
                <span class="s2">"IPv4Address"</span>: <span class="s2">"172.17.0.2/16"</span>,
                <span class="s2">"IPv6Address"</span>: <span class="s2">""</span>
            <span class="o">}</span>
        <span class="o">}</span>,
        <span class="s2">"Options"</span>: <span class="o">{</span>
            <span class="s2">"com.docker.network.bridge.default_bridge"</span>: <span class="s2">"true"</span>,
            <span class="s2">"com.docker.network.bridge.enable_icc"</span>: <span class="s2">"true"</span>,
            <span class="s2">"com.docker.network.bridge.enable_ip_masquerade"</span>: <span class="s2">"true"</span>,
            <span class="s2">"com.docker.network.bridge.host_binding_ipv4"</span>: <span class="s2">"0.0.0.0"</span>,
            <span class="s2">"com.docker.network.bridge.name"</span>: <span class="s2">"docker0"</span>,
            <span class="s2">"com.docker.network.driver.mtu"</span>: <span class="s2">"1500"</span>
        <span class="o">}</span>,
        <span class="s2">"Labels"</span>: <span class="o">{}</span>
    <span class="o">}</span>
<span class="o">]</span>
</code></pre></div>
<p>container 를 연결 해제하여 네트워크에서 컨테이너를 제거 할 수 있습니다.
이렇게 하려면 네트워크 이름과 컨테이너 이름을 입력해야합니다.
컨테이너 ID를 사용할 수도 있습니다.
이 예제에서는 이름이 더 빠릅니다.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>docker network disconnect bridge networktest

<span class="nv">$ </span>docker network inspect bridge
<span class="o">[</span>
    <span class="o">{</span>
        <span class="s2">"Name"</span>: <span class="s2">"bridge"</span>,
        <span class="s2">"Id"</span>: <span class="s2">"b2b9cfda32ed1fad7052a679de9be9e1804baf330c018c94607ea730fb010284"</span>,
        <span class="s2">"Created"</span>: <span class="s2">"2017-12-15T08:55:01.770280163+09:00"</span>,
        <span class="s2">"Scope"</span>: <span class="s2">"local"</span>,
        <span class="s2">"Driver"</span>: <span class="s2">"bridge"</span>,
        <span class="s2">"EnableIPv6"</span>: <span class="nb">false</span>,
        <span class="s2">"IPAM"</span>: <span class="o">{</span>
            <span class="s2">"Driver"</span>: <span class="s2">"default"</span>,
            <span class="s2">"Options"</span>: null,
            <span class="s2">"Config"</span>: <span class="o">[</span>
                <span class="o">{</span>
                    <span class="s2">"Subnet"</span>: <span class="s2">"172.17.0.0/16"</span>,
                    <span class="s2">"Gateway"</span>: <span class="s2">"172.17.0.1"</span>
                <span class="o">}</span>
            <span class="o">]</span>
        <span class="o">}</span>,
        <span class="s2">"Internal"</span>: <span class="nb">false</span>,
        <span class="s2">"Attachable"</span>: <span class="nb">false</span>,
        <span class="s2">"Ingress"</span>: <span class="nb">false</span>,
        <span class="s2">"ConfigFrom"</span>: <span class="o">{</span>
            <span class="s2">"Network"</span>: <span class="s2">""</span>
        <span class="o">}</span>,
        <span class="s2">"ConfigOnly"</span>: <span class="nb">false</span>,
        <span class="s2">"Containers"</span>: <span class="o">{}</span>,
        <span class="s2">"Options"</span>: <span class="o">{</span>
            <span class="s2">"com.docker.network.bridge.default_bridge"</span>: <span class="s2">"true"</span>,
            <span class="s2">"com.docker.network.bridge.enable_icc"</span>: <span class="s2">"true"</span>,
            <span class="s2">"com.docker.network.bridge.enable_ip_masquerade"</span>: <span class="s2">"true"</span>,
            <span class="s2">"com.docker.network.bridge.host_binding_ipv4"</span>: <span class="s2">"0.0.0.0"</span>,
            <span class="s2">"com.docker.network.bridge.name"</span>: <span class="s2">"docker0"</span>,
            <span class="s2">"com.docker.network.driver.mtu"</span>: <span class="s2">"1500"</span>
        <span class="o">}</span>,
        <span class="s2">"Labels"</span>: <span class="o">{}</span>
    <span class="o">}</span>
<span class="o">]</span>
</code></pre></div>
<p>network 에서 container 를 분리 할 수 ​​있지만 <code>bridge</code> 라는 기본 제공 <code>bridge</code> 네트워크는 제거할 수 없습니다.
네트워크는 다른 container 또는 다른 network 에서 container 를 격리하는 자연스러운 방법입니다.
Docker에 익숙해지면 자신 만의 네트워크를 만들 수 있습니다.</p>

<h2 id="create-your-own-bridge-network">
<a class="anchor" href="#create-your-own-bridge-network" aria-hidden="true"><span class="octicon octicon-link"></span></a>Create your own bridge network</h2>

<p>Docker Engine 은 기본적으로 bridge 네트워크와 overlay 네트워크를 모두 지원합니다.
bridge 네트워크는 Docker Engine을 실행하는 단일 host 로 제한됩니다.
overlay 네트워크에는 여러 host 가 포함될 수 있으며 보다 고급 주제입니다.
이 예에서는 bridge 네트워크를 만듭니다:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>docker network create <span class="nt">-d</span> bridge my_bridge

f84ab21f50d1c666836c8ce2a9c87aaf6d46d2b55e21ce30f5f8b74402582739
</code></pre></div>
<p><code>-d</code> flag 는 Docker 에게 새 네트워크에 대한 <code>bridge</code> driver 를 사용하도록 지시합니다.
당신은 flag off 에 <code>bridge</code> 는 이 flag 의 기본값이어서 안할 수도 있습니다.
시스템의 네트워크 목록을 작성하십시오.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>docker network <span class="nb">ls

</span>NETWORK ID          NAME                DRIVER              SCOPE
ea548147490a        bridge              bridge              <span class="nb">local
</span>d1f995986ee2        docker_gwbridge     bridge              <span class="nb">local
</span>51c91d09ad62        host                host                <span class="nb">local
</span>f84ab21f50d1        my_bridge           bridge              <span class="nb">local
</span>7af9c0605c82        none                null                <span class="nb">local</span>
</code></pre></div>
<p>네트워크를 검사하면 아무것도 없다는 것을 알 수 있습니다.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>docker network inspect my_bridge

<span class="o">[</span>
    <span class="o">{</span>
        <span class="s2">"Name"</span>: <span class="s2">"my_bridge"</span>,
        <span class="s2">"Id"</span>: <span class="s2">"f84ab21f50d1c666836c8ce2a9c87aaf6d46d2b55e21ce30f5f8b74402582739"</span>,
        <span class="s2">"Created"</span>: <span class="s2">"2017-12-18T10:16:50.760652362+09:00"</span>,
        <span class="s2">"Scope"</span>: <span class="s2">"local"</span>,
        <span class="s2">"Driver"</span>: <span class="s2">"bridge"</span>,
        <span class="s2">"EnableIPv6"</span>: <span class="nb">false</span>,
        <span class="s2">"IPAM"</span>: <span class="o">{</span>
            <span class="s2">"Driver"</span>: <span class="s2">"default"</span>,
            <span class="s2">"Options"</span>: <span class="o">{}</span>,
            <span class="s2">"Config"</span>: <span class="o">[</span>
                <span class="o">{</span>
                    <span class="s2">"Subnet"</span>: <span class="s2">"172.19.0.0/16"</span>,
                    <span class="s2">"Gateway"</span>: <span class="s2">"172.19.0.1"</span>
                <span class="o">}</span>
            <span class="o">]</span>
        <span class="o">}</span>,
        <span class="s2">"Internal"</span>: <span class="nb">false</span>,
        <span class="s2">"Attachable"</span>: <span class="nb">false</span>,
        <span class="s2">"Ingress"</span>: <span class="nb">false</span>,
        <span class="s2">"ConfigFrom"</span>: <span class="o">{</span>
            <span class="s2">"Network"</span>: <span class="s2">""</span>
        <span class="o">}</span>,
        <span class="s2">"ConfigOnly"</span>: <span class="nb">false</span>,
        <span class="s2">"Containers"</span>: <span class="o">{}</span>,
        <span class="s2">"Options"</span>: <span class="o">{}</span>,
        <span class="s2">"Labels"</span>: <span class="o">{}</span>
    <span class="o">}</span>
<span class="o">]</span>
</code></pre></div>
<h2 id="add-containers-to-a-network">
<a class="anchor" href="#add-containers-to-a-network" aria-hidden="true"><span class="octicon octicon-link"></span></a>Add containers to a network</h2>

<p>콘서트에서 작동하지만 안전하게 작동하는 웹 응용 프로그램을 구축하려면 network 를 만드십시오.
network 는 정의상 container 에 대한 완벽한 격리를 제공합니다.
container 를 처음 실행할 때 network 에 container 를 추가 할 수 있습니다.</p>

<p>PostgreSQL 데이터베이스를 실행하는 container 를 실행하고 <code>--net=my_bridge</code> flag 를 전달하여 새 네트워크에 연결합니다:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>docker run <span class="nt">-d</span> <span class="nt">--network</span><span class="o">=</span>my_bridge <span class="nt">--name</span> db training/postgres

Unable to find image <span class="s1">'training/postgres:latest'</span> locally
latest: Pulling from training/postgres
a3ed95caeb02: Pull <span class="nb">complete
</span>6e71c809542e: Pull <span class="nb">complete
</span>2978d9af87ba: Pull <span class="nb">complete
</span>e1bca35b062f: Pull <span class="nb">complete
</span>500b6decf741: Pull <span class="nb">complete
</span>74b14ef2151f: Pull <span class="nb">complete
</span>7afd5ed3826e: Pull <span class="nb">complete
</span>3c69bb244f5e: Pull <span class="nb">complete
</span>d86f9ec5aedf: Pull <span class="nb">complete
</span>010fabf20157: Pull <span class="nb">complete
</span>Digest: sha256:a945dc6dcfbc8d009c3d972931608344b76c2870ce796da00a827bd50791907e
Status: Downloaded newer image <span class="k">for </span>training/postgres:latest
73713dadf16b4b25d49d3adc53105843aa7940918cd869bcd8f3aef8844a578b
</code></pre></div>
<p><code>my_bridge</code> 를 검사하면 container 가 첨부된 것을 볼 수 있습니다.
container 를 검사하여 연결된 위치를 확인할 수도 있습니다:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>docker inspect <span class="nt">--format</span><span class="o">=</span><span class="s1">''</span> db

<span class="o">{</span><span class="s2">"my_bridge"</span>:<span class="o">{</span><span class="s2">"IPAMConfig"</span>:null,<span class="s2">"Links"</span>:null,<span class="s2">"Aliases"</span>:[<span class="s2">"73713dadf16b"</span><span class="o">]</span>,<span class="s2">"NetworkID"</span>:<span class="s2">"f84ab21f50d1c666836c8ce2a9c87aaf6d46d2b55e21ce30f5f8b74402582739"</span>,<span class="s2">"EndpointID"</span>:<span class="s2">"6246a03914f09d0d76f2c49ec96d9d78161cd25d6f988f1588dee57705a5497c"</span>,<span class="s2">"Gateway"</span>:<span class="s2">"172.19.0.1"</span>,<span class="s2">"IPAddress"</span>:<span class="s2">"172.19.0.2"</span>,<span class="s2">"IPPrefixLen"</span>:16,<span class="s2">"IPv6Gateway"</span>:<span class="s2">""</span>,<span class="s2">"GlobalIPv6Address"</span>:<span class="s2">""</span>,<span class="s2">"GlobalIPv6PrefixLen"</span>:0,<span class="s2">"MacAddress"</span>:<span class="s2">"02:42:ac:13:00:02"</span>,<span class="s2">"DriverOpts"</span>:null<span class="o">}}</span>
</code></pre></div>
<p>이제 익숙한 웹 응용 프로그램을 시작하십시오. 이번에는 네트워크를 지정하지 않습니다.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>docker run <span class="nt">-d</span> <span class="nt">--name</span> web training/webapp python app.py
</code></pre></div>
<p><img src="/Documents/Develop/CaaS(Containers_as_a_Service)/Docker/img/bridge2.png" alt="bridge2"></p>

<p><code>web</code> 응용 프로그램이 실행되는 네트워크는 무엇입니까?
응용 프로그램을 검사하면 기본 <code>bridge</code> 네트워크에서 실행 중임을 알 수 있습니다.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">docker inspect <span class="nt">--format</span><span class="o">=</span><span class="s1">'{{json .NetworkSettings.Networks}}'</span> web

<span class="o">{</span><span class="s2">"bridge"</span>:<span class="o">{</span><span class="s2">"IPAMConfig"</span>:null,<span class="s2">"Links"</span>:null,<span class="s2">"Aliases"</span>:null,<span class="s2">"NetworkID"</span>:<span class="s2">"ea548147490a25c54ca093a5a9b7a90903f272439630a40c28b903462a3ab92b"</span>,<span class="s2">"EndpointID"</span>:<span class="s2">"2cce13e2fe8a00c3b7a94e0e583fa53924ddf1d202e45d3ca4087b6f834c83bc"</span>,<span class="s2">"Gateway"</span>:<span class="s2">"172.17.0.1"</span>,<span class="s2">"IPAddress"</span>:<span class="s2">"172.17.0.2"</span>,<span class="s2">"IPPrefixLen"</span>:16,<span class="s2">"IPv6Gateway"</span>:<span class="s2">""</span>,<span class="s2">"GlobalIPv6Address"</span>:<span class="s2">""</span>,<span class="s2">"GlobalIPv6PrefixLen"</span>:0,<span class="s2">"MacAddress"</span>:<span class="s2">"02:42:ac:11:00:02"</span>,<span class="s2">"DriverOpts"</span>:null<span class="o">}}</span>
</code></pre></div>
<p>그런 다음 <code>web</code> 의 IP 주소를 가져옵니다.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>docker inspect <span class="nt">--format</span><span class="o">=</span><span class="s1">'{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}'</span> web

172.17.0.2
</code></pre></div>
<p>이제, 실행중인 <code>db</code> container 에 shell 을 열어봅니다:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>docker <span class="nb">exec</span> <span class="nt">-it</span> db bash

root@73713dadf16b:/#
root@73713dadf16b:/# ping 172.17.0.2
PING 172.17.0.2 <span class="o">(</span>172.17.0.2<span class="o">)</span> 56<span class="o">(</span>84<span class="o">)</span> bytes of data.
^C
<span class="nt">---</span> 172.17.0.2 ping statistics <span class="nt">---</span>
6 packets transmitted, 0 received, 100% packet loss, <span class="nb">time </span>5107ms
</code></pre></div>
<p>조금 후에 <code>CTRL-C</code> 를 사용하여 <code>ping</code> 을 끝내면 ping이 실패한 것을 알 수 있습니다.
두 container 가 다른 네트워크에서 실행되기 때문입니다.
우린 그것을 고칠 수 있습니다.
그런 다음 <code>exit</code> 명령을 사용하여 container 를 닫으십시오.</p>

<p>Docker 네트워킹을 사용하면 원하는만큼의 네트워크에 container 를 연결할 수 있습니다.
이미 실행중인 container 를 연결할 수도 있습니다.
계속해서 실행중인 <code>web</code> 앱을 <code>my_bridge</code> 에 연결하십시오.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>docker network connect my_bridge web
</code></pre></div>
<p>확인:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>docker inspect <span class="nt">--format</span><span class="o">=</span><span class="s1">'{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}'</span> web

172.17.0.2 172.19.0.3
</code></pre></div>
<p><img src="/Documents/Develop/CaaS(Containers_as_a_Service)/Docker/img/bridge3.png" alt="bridge3"></p>

<p>shell 을 다시 <code>db</code> 어플리케이션으로 열고 ping 명령을 시도하십시오.
이번에는 IP 주소 대신 컨테이너 이름 web을 사용하십시오.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>docker <span class="nb">exec</span> <span class="nt">-it</span> db bash

root@73713dadf16b:/#
root@73713dadf16b:/# ping 172.17.0.2

PING 172.17.0.2 <span class="o">(</span>172.17.0.2<span class="o">)</span> 56<span class="o">(</span>84<span class="o">)</span> bytes of data.
^C
<span class="nt">---</span> 172.17.0.2 ping statistics <span class="nt">---</span>
10 packets transmitted, 0 received, 100% packet loss, <span class="nb">time </span>9211ms


root@73713dadf16b:/# 172.19.0.3

PING 172.19.0.3 <span class="o">(</span>172.19.0.3<span class="o">)</span> 56<span class="o">(</span>84<span class="o">)</span> bytes of data.
64 bytes from 172.19.0.3: <span class="nv">icmp_seq</span><span class="o">=</span>1 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.077 ms
64 bytes from 172.19.0.3: <span class="nv">icmp_seq</span><span class="o">=</span>2 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.053 ms
64 bytes from 172.19.0.3: <span class="nv">icmp_seq</span><span class="o">=</span>3 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.050 ms
64 bytes from 172.19.0.3: <span class="nv">icmp_seq</span><span class="o">=</span>4 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.053 ms
^C
<span class="nt">---</span> 172.19.0.3 ping statistics <span class="nt">---</span>
4 packets transmitted, 4 received, 0% packet loss, <span class="nb">time </span>3053ms
rtt min/avg/max/mdev <span class="o">=</span> 0.050/0.058/0.077/0.012 ms
</code></pre></div>
<p><code>ping</code> 이 다른 IP 주소 (<code>bridge</code> 네트워크의 주소와 다른 <code>my_bridge</code> 의 주소)에 연결하고 있음을 나타냅니다.</p>

<h2 id="reference">
<a class="anchor" href="#reference" aria-hidden="true"><span class="octicon octicon-link"></span></a>Reference</h2>

<p><a href="https://docs.docker.com/engine/tutorials/networkingcontainers/">https://docs.docker.com/engine/tutorials/networkingcontainers/</a></p>

  </div>

<div>
  <p>사용자 가이드를 통해 작업하는 중이면 단순한 애플리케이션을 구축하고 실행했습니다.
당신은 또한 당신 자신의 이미지를 만들었습니다.
이 섹션에서는 컨테이너를 네트워크하는 방법을 설명합니다.</p>

<h2 id="launch-a-container-on-the-default-network">Launch a container on the default network</h2>

<p>Docker는 <strong>network drivers</strong> 를 사용하여 네트워킹 컨테이너를 지원합니다.
기본적으로 Docker는 사용자, <code>bridge</code> 및 <code>overlay</code> 드라이버 용으로 두 개의 네트워크 드라이버를 제공합니다.
나만의 드라이버를 만들 수 있지만 고급 작업인 네트워크 드라이버 플러그인을 작성할 수도 있습니다.</p>

<p>Docker Engine을 설치할 때 마다 자동으로 세 개의 기본 네트워크가 포함됩니다.
당신은 그들을 나열할 수 있습니다:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>docker network <span class="nb">ls

</span>NETWORK ID          NAME                DRIVER              SCOPE
b2b9cfda32ed        bridge              bridge              <span class="nb">local
</span>d1f995986ee2        docker_gwbridge     bridge              <span class="nb">local
</span>51c91d09ad62        host                host                <span class="nb">local
</span>7af9c0605c82        none                null                <span class="nb">local</span>
</code></pre></div>
<p><code>bridge</code> 라는 네트워크는 특별한 네트워크입니다.
그렇지 않으면 Docker는 항상이 네트워크에서 컨테이너를 시작합니다. 지금 시도해보십시오:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>docker run <span class="nt">-itd</span> <span class="nt">--name</span><span class="o">=</span>networktest ubuntu

Unable to find image <span class="s1">'ubuntu:latest'</span> locally
latest: Pulling from library/ubuntu
50aff78429b1: Pull <span class="nb">complete
</span>f6d82e297bce: Pull <span class="nb">complete
</span>275abb2c8a6f: Pull <span class="nb">complete
</span>9f15a39356d6: Pull <span class="nb">complete
</span>fc0342a94c89: Pull <span class="nb">complete
</span>Digest: sha256:b2b7d60b7ea23a11566eed55aac136afdbc563cabcbbf9bc0b85094cc3776a5a
Status: Downloaded newer image <span class="k">for </span>ubuntu:latest
f6c02a7b0585896bc1327b8754cec9d2c2c423c907a2eb23145d9789de8c43ae
</code></pre></div>
<p><img src="/Documents/Develop/CaaS(Containers_as_a_Service)/Docker/img/bridge1.png" alt="bridge1"></p>

<p>네트워크를 검사하면 컨테이너의 IP 주소를 쉽게 찾을 수 있습니다.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>docker network inspect bridge

<span class="o">[</span>
    <span class="o">{</span>
        <span class="s2">"Name"</span>: <span class="s2">"bridge"</span>,
        <span class="s2">"Id"</span>: <span class="s2">"b2b9cfda32ed1fad7052a679de9be9e1804baf330c018c94607ea730fb010284"</span>,
        <span class="s2">"Created"</span>: <span class="s2">"2017-12-15T08:55:01.770280163+09:00"</span>,
        <span class="s2">"Scope"</span>: <span class="s2">"local"</span>,
        <span class="s2">"Driver"</span>: <span class="s2">"bridge"</span>,
        <span class="s2">"EnableIPv6"</span>: <span class="nb">false</span>,
        <span class="s2">"IPAM"</span>: <span class="o">{</span>
            <span class="s2">"Driver"</span>: <span class="s2">"default"</span>,
            <span class="s2">"Options"</span>: null,
            <span class="s2">"Config"</span>: <span class="o">[</span>
                <span class="o">{</span>
                    <span class="s2">"Subnet"</span>: <span class="s2">"172.17.0.0/16"</span>,
                    <span class="s2">"Gateway"</span>: <span class="s2">"172.17.0.1"</span>
                <span class="o">}</span>
            <span class="o">]</span>
        <span class="o">}</span>,
        <span class="s2">"Internal"</span>: <span class="nb">false</span>,
        <span class="s2">"Attachable"</span>: <span class="nb">false</span>,
        <span class="s2">"Ingress"</span>: <span class="nb">false</span>,
        <span class="s2">"ConfigFrom"</span>: <span class="o">{</span>
            <span class="s2">"Network"</span>: <span class="s2">""</span>
        <span class="o">}</span>,
        <span class="s2">"ConfigOnly"</span>: <span class="nb">false</span>,
        <span class="s2">"Containers"</span>: <span class="o">{</span>
            <span class="s2">"f6c02a7b0585896bc1327b8754cec9d2c2c423c907a2eb23145d9789de8c43ae"</span>: <span class="o">{</span>
                <span class="s2">"Name"</span>: <span class="s2">"networktest"</span>,
                <span class="s2">"EndpointID"</span>: <span class="s2">"39268ef2e28c152e3359e179e79a864e8bb6b93084a6e50971ca621a96c78d24"</span>,
                <span class="s2">"MacAddress"</span>: <span class="s2">"02:42:ac:11:00:02"</span>,
                <span class="s2">"IPv4Address"</span>: <span class="s2">"172.17.0.2/16"</span>,
                <span class="s2">"IPv6Address"</span>: <span class="s2">""</span>
            <span class="o">}</span>
        <span class="o">}</span>,
        <span class="s2">"Options"</span>: <span class="o">{</span>
            <span class="s2">"com.docker.network.bridge.default_bridge"</span>: <span class="s2">"true"</span>,
            <span class="s2">"com.docker.network.bridge.enable_icc"</span>: <span class="s2">"true"</span>,
            <span class="s2">"com.docker.network.bridge.enable_ip_masquerade"</span>: <span class="s2">"true"</span>,
            <span class="s2">"com.docker.network.bridge.host_binding_ipv4"</span>: <span class="s2">"0.0.0.0"</span>,
            <span class="s2">"com.docker.network.bridge.name"</span>: <span class="s2">"docker0"</span>,
            <span class="s2">"com.docker.network.driver.mtu"</span>: <span class="s2">"1500"</span>
        <span class="o">}</span>,
        <span class="s2">"Labels"</span>: <span class="o">{}</span>
    <span class="o">}</span>
<span class="o">]</span>
</code></pre></div>
<p>container 를 연결 해제하여 네트워크에서 컨테이너를 제거 할 수 있습니다.
이렇게 하려면 네트워크 이름과 컨테이너 이름을 입력해야합니다.
컨테이너 ID를 사용할 수도 있습니다.
이 예제에서는 이름이 더 빠릅니다.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>docker network disconnect bridge networktest

<span class="nv">$ </span>docker network inspect bridge
<span class="o">[</span>
    <span class="o">{</span>
        <span class="s2">"Name"</span>: <span class="s2">"bridge"</span>,
        <span class="s2">"Id"</span>: <span class="s2">"b2b9cfda32ed1fad7052a679de9be9e1804baf330c018c94607ea730fb010284"</span>,
        <span class="s2">"Created"</span>: <span class="s2">"2017-12-15T08:55:01.770280163+09:00"</span>,
        <span class="s2">"Scope"</span>: <span class="s2">"local"</span>,
        <span class="s2">"Driver"</span>: <span class="s2">"bridge"</span>,
        <span class="s2">"EnableIPv6"</span>: <span class="nb">false</span>,
        <span class="s2">"IPAM"</span>: <span class="o">{</span>
            <span class="s2">"Driver"</span>: <span class="s2">"default"</span>,
            <span class="s2">"Options"</span>: null,
            <span class="s2">"Config"</span>: <span class="o">[</span>
                <span class="o">{</span>
                    <span class="s2">"Subnet"</span>: <span class="s2">"172.17.0.0/16"</span>,
                    <span class="s2">"Gateway"</span>: <span class="s2">"172.17.0.1"</span>
                <span class="o">}</span>
            <span class="o">]</span>
        <span class="o">}</span>,
        <span class="s2">"Internal"</span>: <span class="nb">false</span>,
        <span class="s2">"Attachable"</span>: <span class="nb">false</span>,
        <span class="s2">"Ingress"</span>: <span class="nb">false</span>,
        <span class="s2">"ConfigFrom"</span>: <span class="o">{</span>
            <span class="s2">"Network"</span>: <span class="s2">""</span>
        <span class="o">}</span>,
        <span class="s2">"ConfigOnly"</span>: <span class="nb">false</span>,
        <span class="s2">"Containers"</span>: <span class="o">{}</span>,
        <span class="s2">"Options"</span>: <span class="o">{</span>
            <span class="s2">"com.docker.network.bridge.default_bridge"</span>: <span class="s2">"true"</span>,
            <span class="s2">"com.docker.network.bridge.enable_icc"</span>: <span class="s2">"true"</span>,
            <span class="s2">"com.docker.network.bridge.enable_ip_masquerade"</span>: <span class="s2">"true"</span>,
            <span class="s2">"com.docker.network.bridge.host_binding_ipv4"</span>: <span class="s2">"0.0.0.0"</span>,
            <span class="s2">"com.docker.network.bridge.name"</span>: <span class="s2">"docker0"</span>,
            <span class="s2">"com.docker.network.driver.mtu"</span>: <span class="s2">"1500"</span>
        <span class="o">}</span>,
        <span class="s2">"Labels"</span>: <span class="o">{}</span>
    <span class="o">}</span>
<span class="o">]</span>
</code></pre></div>
<p>network 에서 container 를 분리 할 수 ​​있지만 <code>bridge</code> 라는 기본 제공 <code>bridge</code> 네트워크는 제거할 수 없습니다.
네트워크는 다른 container 또는 다른 network 에서 container 를 격리하는 자연스러운 방법입니다.
Docker에 익숙해지면 자신 만의 네트워크를 만들 수 있습니다.</p>

<h2 id="create-your-own-bridge-network">Create your own bridge network</h2>

<p>Docker Engine 은 기본적으로 bridge 네트워크와 overlay 네트워크를 모두 지원합니다.
bridge 네트워크는 Docker Engine을 실행하는 단일 host 로 제한됩니다.
overlay 네트워크에는 여러 host 가 포함될 수 있으며 보다 고급 주제입니다.
이 예에서는 bridge 네트워크를 만듭니다:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>docker network create <span class="nt">-d</span> bridge my_bridge

f84ab21f50d1c666836c8ce2a9c87aaf6d46d2b55e21ce30f5f8b74402582739
</code></pre></div>
<p><code>-d</code> flag 는 Docker 에게 새 네트워크에 대한 <code>bridge</code> driver 를 사용하도록 지시합니다.
당신은 flag off 에 <code>bridge</code> 는 이 flag 의 기본값이어서 안할 수도 있습니다.
시스템의 네트워크 목록을 작성하십시오.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>docker network <span class="nb">ls

</span>NETWORK ID          NAME                DRIVER              SCOPE
ea548147490a        bridge              bridge              <span class="nb">local
</span>d1f995986ee2        docker_gwbridge     bridge              <span class="nb">local
</span>51c91d09ad62        host                host                <span class="nb">local
</span>f84ab21f50d1        my_bridge           bridge              <span class="nb">local
</span>7af9c0605c82        none                null                <span class="nb">local</span>
</code></pre></div>
<p>네트워크를 검사하면 아무것도 없다는 것을 알 수 있습니다.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>docker network inspect my_bridge

<span class="o">[</span>
    <span class="o">{</span>
        <span class="s2">"Name"</span>: <span class="s2">"my_bridge"</span>,
        <span class="s2">"Id"</span>: <span class="s2">"f84ab21f50d1c666836c8ce2a9c87aaf6d46d2b55e21ce30f5f8b74402582739"</span>,
        <span class="s2">"Created"</span>: <span class="s2">"2017-12-18T10:16:50.760652362+09:00"</span>,
        <span class="s2">"Scope"</span>: <span class="s2">"local"</span>,
        <span class="s2">"Driver"</span>: <span class="s2">"bridge"</span>,
        <span class="s2">"EnableIPv6"</span>: <span class="nb">false</span>,
        <span class="s2">"IPAM"</span>: <span class="o">{</span>
            <span class="s2">"Driver"</span>: <span class="s2">"default"</span>,
            <span class="s2">"Options"</span>: <span class="o">{}</span>,
            <span class="s2">"Config"</span>: <span class="o">[</span>
                <span class="o">{</span>
                    <span class="s2">"Subnet"</span>: <span class="s2">"172.19.0.0/16"</span>,
                    <span class="s2">"Gateway"</span>: <span class="s2">"172.19.0.1"</span>
                <span class="o">}</span>
            <span class="o">]</span>
        <span class="o">}</span>,
        <span class="s2">"Internal"</span>: <span class="nb">false</span>,
        <span class="s2">"Attachable"</span>: <span class="nb">false</span>,
        <span class="s2">"Ingress"</span>: <span class="nb">false</span>,
        <span class="s2">"ConfigFrom"</span>: <span class="o">{</span>
            <span class="s2">"Network"</span>: <span class="s2">""</span>
        <span class="o">}</span>,
        <span class="s2">"ConfigOnly"</span>: <span class="nb">false</span>,
        <span class="s2">"Containers"</span>: <span class="o">{}</span>,
        <span class="s2">"Options"</span>: <span class="o">{}</span>,
        <span class="s2">"Labels"</span>: <span class="o">{}</span>
    <span class="o">}</span>
<span class="o">]</span>
</code></pre></div>
<h2 id="add-containers-to-a-network">Add containers to a network</h2>

<p>콘서트에서 작동하지만 안전하게 작동하는 웹 응용 프로그램을 구축하려면 network 를 만드십시오.
network 는 정의상 container 에 대한 완벽한 격리를 제공합니다.
container 를 처음 실행할 때 network 에 container 를 추가 할 수 있습니다.</p>

<p>PostgreSQL 데이터베이스를 실행하는 container 를 실행하고 <code>--net=my_bridge</code> flag 를 전달하여 새 네트워크에 연결합니다:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>docker run <span class="nt">-d</span> <span class="nt">--network</span><span class="o">=</span>my_bridge <span class="nt">--name</span> db training/postgres

Unable to find image <span class="s1">'training/postgres:latest'</span> locally
latest: Pulling from training/postgres
a3ed95caeb02: Pull <span class="nb">complete
</span>6e71c809542e: Pull <span class="nb">complete
</span>2978d9af87ba: Pull <span class="nb">complete
</span>e1bca35b062f: Pull <span class="nb">complete
</span>500b6decf741: Pull <span class="nb">complete
</span>74b14ef2151f: Pull <span class="nb">complete
</span>7afd5ed3826e: Pull <span class="nb">complete
</span>3c69bb244f5e: Pull <span class="nb">complete
</span>d86f9ec5aedf: Pull <span class="nb">complete
</span>010fabf20157: Pull <span class="nb">complete
</span>Digest: sha256:a945dc6dcfbc8d009c3d972931608344b76c2870ce796da00a827bd50791907e
Status: Downloaded newer image <span class="k">for </span>training/postgres:latest
73713dadf16b4b25d49d3adc53105843aa7940918cd869bcd8f3aef8844a578b
</code></pre></div>
<p><code>my_bridge</code> 를 검사하면 container 가 첨부된 것을 볼 수 있습니다.
container 를 검사하여 연결된 위치를 확인할 수도 있습니다:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>docker inspect <span class="nt">--format</span><span class="o">=</span><span class="s1">''</span> db

<span class="o">{</span><span class="s2">"my_bridge"</span>:<span class="o">{</span><span class="s2">"IPAMConfig"</span>:null,<span class="s2">"Links"</span>:null,<span class="s2">"Aliases"</span>:[<span class="s2">"73713dadf16b"</span><span class="o">]</span>,<span class="s2">"NetworkID"</span>:<span class="s2">"f84ab21f50d1c666836c8ce2a9c87aaf6d46d2b55e21ce30f5f8b74402582739"</span>,<span class="s2">"EndpointID"</span>:<span class="s2">"6246a03914f09d0d76f2c49ec96d9d78161cd25d6f988f1588dee57705a5497c"</span>,<span class="s2">"Gateway"</span>:<span class="s2">"172.19.0.1"</span>,<span class="s2">"IPAddress"</span>:<span class="s2">"172.19.0.2"</span>,<span class="s2">"IPPrefixLen"</span>:16,<span class="s2">"IPv6Gateway"</span>:<span class="s2">""</span>,<span class="s2">"GlobalIPv6Address"</span>:<span class="s2">""</span>,<span class="s2">"GlobalIPv6PrefixLen"</span>:0,<span class="s2">"MacAddress"</span>:<span class="s2">"02:42:ac:13:00:02"</span>,<span class="s2">"DriverOpts"</span>:null<span class="o">}}</span>
</code></pre></div>
<p>이제 익숙한 웹 응용 프로그램을 시작하십시오. 이번에는 네트워크를 지정하지 않습니다.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>docker run <span class="nt">-d</span> <span class="nt">--name</span> web training/webapp python app.py
</code></pre></div>
<p><img src="/Documents/Develop/CaaS(Containers_as_a_Service)/Docker/img/bridge2.png" alt="bridge2"></p>

<p><code>web</code> 응용 프로그램이 실행되는 네트워크는 무엇입니까?
응용 프로그램을 검사하면 기본 <code>bridge</code> 네트워크에서 실행 중임을 알 수 있습니다.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">docker inspect <span class="nt">--format</span><span class="o">=</span><span class="s1">'{{json .NetworkSettings.Networks}}'</span> web

<span class="o">{</span><span class="s2">"bridge"</span>:<span class="o">{</span><span class="s2">"IPAMConfig"</span>:null,<span class="s2">"Links"</span>:null,<span class="s2">"Aliases"</span>:null,<span class="s2">"NetworkID"</span>:<span class="s2">"ea548147490a25c54ca093a5a9b7a90903f272439630a40c28b903462a3ab92b"</span>,<span class="s2">"EndpointID"</span>:<span class="s2">"2cce13e2fe8a00c3b7a94e0e583fa53924ddf1d202e45d3ca4087b6f834c83bc"</span>,<span class="s2">"Gateway"</span>:<span class="s2">"172.17.0.1"</span>,<span class="s2">"IPAddress"</span>:<span class="s2">"172.17.0.2"</span>,<span class="s2">"IPPrefixLen"</span>:16,<span class="s2">"IPv6Gateway"</span>:<span class="s2">""</span>,<span class="s2">"GlobalIPv6Address"</span>:<span class="s2">""</span>,<span class="s2">"GlobalIPv6PrefixLen"</span>:0,<span class="s2">"MacAddress"</span>:<span class="s2">"02:42:ac:11:00:02"</span>,<span class="s2">"DriverOpts"</span>:null<span class="o">}}</span>
</code></pre></div>
<p>그런 다음 <code>web</code> 의 IP 주소를 가져옵니다.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>docker inspect <span class="nt">--format</span><span class="o">=</span><span class="s1">'{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}'</span> web

172.17.0.2
</code></pre></div>
<p>이제, 실행중인 <code>db</code> container 에 shell 을 열어봅니다:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>docker <span class="nb">exec</span> <span class="nt">-it</span> db bash

root@73713dadf16b:/#
root@73713dadf16b:/# ping 172.17.0.2
PING 172.17.0.2 <span class="o">(</span>172.17.0.2<span class="o">)</span> 56<span class="o">(</span>84<span class="o">)</span> bytes of data.
^C
<span class="nt">---</span> 172.17.0.2 ping statistics <span class="nt">---</span>
6 packets transmitted, 0 received, 100% packet loss, <span class="nb">time </span>5107ms
</code></pre></div>
<p>조금 후에 <code>CTRL-C</code> 를 사용하여 <code>ping</code> 을 끝내면 ping이 실패한 것을 알 수 있습니다.
두 container 가 다른 네트워크에서 실행되기 때문입니다.
우린 그것을 고칠 수 있습니다.
그런 다음 <code>exit</code> 명령을 사용하여 container 를 닫으십시오.</p>

<p>Docker 네트워킹을 사용하면 원하는만큼의 네트워크에 container 를 연결할 수 있습니다.
이미 실행중인 container 를 연결할 수도 있습니다.
계속해서 실행중인 <code>web</code> 앱을 <code>my_bridge</code> 에 연결하십시오.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>docker network connect my_bridge web
</code></pre></div>
<p>확인:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>docker inspect <span class="nt">--format</span><span class="o">=</span><span class="s1">'{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}'</span> web

172.17.0.2 172.19.0.3
</code></pre></div>
<p><img src="/Documents/Develop/CaaS(Containers_as_a_Service)/Docker/img/bridge3.png" alt="bridge3"></p>

<p>shell 을 다시 <code>db</code> 어플리케이션으로 열고 ping 명령을 시도하십시오.
이번에는 IP 주소 대신 컨테이너 이름 web을 사용하십시오.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>docker <span class="nb">exec</span> <span class="nt">-it</span> db bash

root@73713dadf16b:/#
root@73713dadf16b:/# ping 172.17.0.2

PING 172.17.0.2 <span class="o">(</span>172.17.0.2<span class="o">)</span> 56<span class="o">(</span>84<span class="o">)</span> bytes of data.
^C
<span class="nt">---</span> 172.17.0.2 ping statistics <span class="nt">---</span>
10 packets transmitted, 0 received, 100% packet loss, <span class="nb">time </span>9211ms


root@73713dadf16b:/# 172.19.0.3

PING 172.19.0.3 <span class="o">(</span>172.19.0.3<span class="o">)</span> 56<span class="o">(</span>84<span class="o">)</span> bytes of data.
64 bytes from 172.19.0.3: <span class="nv">icmp_seq</span><span class="o">=</span>1 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.077 ms
64 bytes from 172.19.0.3: <span class="nv">icmp_seq</span><span class="o">=</span>2 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.053 ms
64 bytes from 172.19.0.3: <span class="nv">icmp_seq</span><span class="o">=</span>3 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.050 ms
64 bytes from 172.19.0.3: <span class="nv">icmp_seq</span><span class="o">=</span>4 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.053 ms
^C
<span class="nt">---</span> 172.19.0.3 ping statistics <span class="nt">---</span>
4 packets transmitted, 4 received, 0% packet loss, <span class="nb">time </span>3053ms
rtt min/avg/max/mdev <span class="o">=</span> 0.050/0.058/0.077/0.012 ms
</code></pre></div>
<p><code>ping</code> 이 다른 IP 주소 (<code>bridge</code> 네트워크의 주소와 다른 <code>my_bridge</code> 의 주소)에 연결하고 있음을 나타냅니다.</p>

<h2 id="reference">Reference</h2>

<p><a href="https://docs.docker.com/engine/tutorials/networkingcontainers/" rel="nofollow" target="_blank">https://docs.docker.com/engine/tutorials/networkingcontainers/</a></p>

</div>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/blog/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Portal2312&#39;s blog</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Portal2312&#39;s blog</li><li><a class="u-email" href="mailto:portal2312@gmail.com">portal2312@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/portal2312"><svg class="svg-icon"><use xlink:href="/blog/assets/minima-social-icons.svg#github"></use></svg> <span class="username">portal2312</span></a></li><li><a href="https://www.twitter.com/portal2312"><svg class="svg-icon"><use xlink:href="/blog/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">portal2312</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Welcome to my blog.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
