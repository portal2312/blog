<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Part 3 - Views and templates | Portal2312&#39;s blog</title>
<meta name="generator" content="Jekyll v3.8.6" />
<meta property="og:title" content="Part 3 - Views and templates" />
<meta name="author" content="mkkim" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Part 2 의 연장선" />
<meta property="og:description" content="Part 2 의 연장선" />
<link rel="canonical" href="http://localhost:4000/blog/docs/develop/Backend/Python/lib/django/docs/01_First_Steps/tutorial/part_3_views_and_templates.html" />
<meta property="og:url" content="http://localhost:4000/blog/docs/develop/Backend/Python/lib/django/docs/01_First_Steps/tutorial/part_3_views_and_templates.html" />
<meta property="og:site_name" content="Portal2312&#39;s blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-11-06T09:31:12+09:00" />
<script type="application/ld+json">
{"description":"Part 2 의 연장선","headline":"Part 3 - Views and templates","dateModified":"2019-11-06T09:31:12+09:00","datePublished":"2019-11-06T09:31:12+09:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/blog/docs/develop/Backend/Python/lib/django/docs/01_First_Steps/tutorial/part_3_views_and_templates.html"},"url":"http://localhost:4000/blog/docs/develop/Backend/Python/lib/django/docs/01_First_Steps/tutorial/part_3_views_and_templates.html","author":{"@type":"Person","name":"mkkim"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href='/blog/assets/main.css'><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/blog/feed.xml" title="Portal2312's blog" /><script src='/blog/dist/js/common.bundle.js'></script>
</head>
<body><header class="site-header" role="banner">
  <div class="wrapper">
    <a class="site-title" rel="author" href="/blog/">Portal2312&#39;s blog</a>
    <nav class="site-nav">
    <input type="checkbox" id="nav-trigger" class="nav-trigger" />
    <label for="nav-trigger">
      <span class="menu-icon">
        <svg viewBox="0 0 18 15" width="18px" height="15px">
          <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
        </svg>
      </span>
    </label>

    <div class="trigger"><a class="page-link" href="/blog/about.html">
            About
          </a><a class="page-link" href="/blog/posts.html">
            Posts
          </a><a class="page-link" href="/blog/history.html">
            History
          </a><a class="page-link" href="/blog/docs/index.html">
            Docs
          </a></div>
  </nav>
  </div>
  <div class="scroll-indicator-container">
  <div class="scroll-indicator-bar" id="scrollIndicatorBar"></div>
</div>

</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <h1>Part 3 - Views and templates</h1>

  <div>
    <h2>Table of contents</h2>
    <ul class="section-nav">
<li class="toc-entry toc-h2"><a href="#overview">Overview</a></li>
<li class="toc-entry toc-h2"><a href="#writing-more-views">Writing more views</a></li>
<li class="toc-entry toc-h2"><a href="#write-views-that-actually-do-something">Write views that actually do something</a>
<ul>
<li class="toc-entry toc-h3"><a href="#a-shortcut-render">A shortcut: render()</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#raising-a-404-error">Raising a 404 error</a>
<ul>
<li class="toc-entry toc-h3"><a href="#a-shortcut-get_object_or_404">A shortcut: get_object_or_404()</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#use-the-template-system">Use the template system</a></li>
<li class="toc-entry toc-h2"><a href="#removing-hardcoded-urls-in-templates">Removing hardcoded URLs in templates</a></li>
<li class="toc-entry toc-h2"><a href="#namespacing-url-names">Namespacing URL Names</a></li>
<li class="toc-entry toc-h1"><a href="#references">References</a></li>
</ul><p>Part 2 의 연장선</p>

<h2 id="overview">
<a class="anchor" href="#overview" aria-hidden="true"><span class="octicon octicon-link"></span></a>Overview</h2>

<ul>
<li>중요하지 않은 내용 생략</li>
</ul>

<p>Django에서는 웹 페이지와 다른 내용이 뷰에 의해 전달됩니다.</p>

<p>각 뷰는 간단한 파이썬 함수(또는 클래스 기반 뷰의 경우 메서드)로 표현.</p>

<p>Django는 요청 된 URL(정확히 말하면 도메인 이름 뒤에있는 URL의 일부)을 검사하여보기를 선택.</p>

<p>Django - simple 하고 일반적이며, 우아한 URL 패턴을 제공. (/newsarchive/&lt;year&gt;/&lt;month&gt;/)</p>

<p>Django는 URL을 view로 가져 오기 위해 'URLconfs'를 사용.</p>

<p>URLconfs는 URL패턴(정규 표현식으로 설명)을 view에 매핑함.</p>

<p>기본적으로 URLconfs 사용 (상세참조: django.urls)</p>

<hr>

<h2 id="writing-more-views">
<a class="anchor" href="#writing-more-views" aria-hidden="true"><span class="octicon octicon-link"></span></a>Writing more views</h2>

<p>polls/views.py</p>

<p>URL에 "/polls/34/"시 detail()를 실행하고 URL에 제공 한 모든 ID를 표시.
("/polls/34/results/", "/polls/34/vote/")</p>

<p>"/polls/34/"와 같은 페이지를 요청시 Django는 ROOT_URLCONF설정에 의해 가리켜지기 때문에 mysite.urls 의 Python module을 load.</p>

<p>urlpatterns라는 변수를 찾아 정규 표현식을 순차적으로 탐색.</p>

<p>'^polls/'에서 일치 항목을 찾은 후 일치하는 텍스트 ("polls/")를 제거.</p>

<p>나머지 텍스트("34/")를 추가 처리를 위해 'polls.urls'URLconf로 전송.</p>

<p>거기에 r'^(?P<question_id>[0-9]+)/$'와 일치하여 detail() 뷰(View)를 호출함.</question_id></p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">detail</span><span class="p">(</span><span class="n">request</span><span class="o">=&lt;</span><span class="n">HttpRequest</span> <span class="nb">object</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">question_id</span><span class="o">=</span><span class="s">'34'</span><span class="p">)</span>
</code></pre></div>
<p>question_id='34' 부분은 (?P<question_id>[0-9]+)에서 비롯 됨.</question_id></p>

<ul>
<li><p>패턴 주위의 '()'를 사용하면 해당 패턴과 일치하는 텍스트를 "캡처"하여 View기능에 인수로 전송.</p></li>
<li><p>?P<question_id>는 일치 패턴을 식별하는 데 사용할 이름을 정의함.</question_id></p></li>
<li><p>[0-9]+는 일련의 숫자(즉, 숫자)와 일치하는 정규 표현식 임.</p></li>
</ul>

<p>URL 패턴은 정규 표현식이기 때문에 실제로 할 수있는 것에는 제한이 없음.</p>

<p>원하는 경우가 아니라면 .html과 같은 URL cruft를 추가 할 필요가 없습니다.</p>

<p>이 경우 다음과 같이 할 수 있습니다.</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">url</span><span class="p">(</span><span class="s">r'^polls/latest.html$'</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">index</span><span class="p">),</span>
</code></pre></div>
<p>그러나 그렇게 하지 마십시오. 바보 같습니다.</p>

<hr>

<h2 id="write-views-that-actually-do-something">
<a class="anchor" href="#write-views-that-actually-do-something" aria-hidden="true"><span class="octicon octicon-link"></span></a>Write views that actually do something</h2>

<p>실제로 무언가 하는 View 작성하기</p>

<ul>
<li>
<p>각 View는 두 가지 중 하나를 수행.</p>

<ul>
<li>요청된 Page 내용을 포함하는 HttpResponse객체를 반환</li>
<li>Http404 같은 예외를 발생.</li>
<li>나머지는 작성자에 의해.</li>
</ul>
</li>
<li><p>작성자의 View는 Database에서 Record를 읽을 수도 있고 아닐 수도 있음.</p></li>
<li><p>Django나 Thrid-party Python 템플릿 시스템과 같은 템플릿 시스템을 사용할 수 있음.</p></li>
<li><p>PDF파일생성, ZIP파일생성, XML출력, Python Library 사용하여 원하는 것 만들 수 있음.</p></li>
</ul>

<p>Django가 원하는 것은 HttpResponse 또는 Exception.</p>

<p>편리하기 때문에 Part 2에서 다룬 Django의 자체 Database API를 사용.</p>

<p>게시날짜에 따라 : (콜론)으로 구분 된 최신 5개의 설문 질문을 시스템에 표시.</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="err">$</span> <span class="n">vi</span> <span class="o">./</span><span class="n">polls</span><span class="o">/</span><span class="n">views</span><span class="o">.</span><span class="n">py</span>

<span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">latest_question_list</span> <span class="o">=</span> <span class="n">Question</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s">'-pub_date'</span><span class="p">)[:</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span>
    <span class="n">output</span> <span class="o">=</span> <span class="s">', '</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">q</span><span class="o">.</span><span class="n">question_text</span> <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">latest_question_list</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
</code></pre></div>
<ul>
<li>여기에는 문제가 있습니다. 페이지의 디자인이보기에 하드 코딩되어 있습니다.</li>
</ul>

<p>페이지의 모양을 변경하려면이 Python 코드를 편집해야 함.</p>

<ul>
<li>따라서 django의 template 시스템을 사용하여 view가 사용할 수있는 template을</li>
</ul>

<p>생성하여 Python과 Design을 분리해야 함.</p>

<p>먼저
<code>bash
$ cd /polls/
$ mkdir templates
</code></p>

<p>Django는 거기에 있는 template 을 찾을 것.</p>

<p>프로젝트의 Template설정은 Django가 Template을 load하고 rendering 하는 방법을 설명.</p>

<p>기본설정 파일은 <strong>APP_DIRS</strong> 옵션이 <strong>True</strong> 로 설정된 DjangoTemplates 백엔드를 구성.</p>

<p>관습적으로 DjangoTemplates는 각 <strong>INSTALLED_APPS</strong> 에서 "templates" 하위 Dir를 찾음.</p>

<p>방금 생성한 ./templates/ 에서 ./polls/ 생성후 ./index.html 작성.</p>

<p>(./polls/templates/polls/index.html)</p>

<p>app_directories template loader가 위에서 설명한대로 작동하는 방식 때문에</p>

<p>Django에서 template을 간단하게 ./polls/index.html 로 참조 할 수 있음.</p>
<div class="highlight"><pre><code class="language-" data-lang="">* Template namespacing

이제 우리는 Templates를 다른 polls 서브 디렉토리를 작성하는 대신
polls/templates에 직접 넣을 수 있지만 실제로는 좋지 않은 아이디어.

Django는 이름이 일치하는 첫 번째 template을 선택.
다른 Application에 같은 이름의 template가 있는 경우, Django는 그것들을 구분할 수 없음.

올바른 것을 가리키는, 이것을 보장하는 가장 쉬운 방법은 namespacing를 지정하는 것.
즉, 다른 Directory 이름 application 자체에 해당 templates를 넣는 것임.

(Bad)  ./polls/template/index.html
(Good) ./polls/templates/polls/index.html
</code></pre></div><div class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!-- polls/templates/polls/index.html--&gt;</span>


    <span class="nt">&lt;p&gt;</span>No polls are available.<span class="nt">&lt;/p&gt;</span>

</code></pre></div><div class="highlight"><pre><code class="language-python" data-lang="python"><span class="c1"># polls/views.py
</span>
<span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponse</span>
<span class="kn">from</span> <span class="nn">django.template</span> <span class="kn">import</span> <span class="n">loader</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Question</span>


<span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">latest_question_list</span> <span class="o">=</span> <span class="n">Question</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s">'-pub_date'</span><span class="p">)[:</span><span class="mi">5</span><span class="p">]</span>
    <span class="n">template</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">get_template</span><span class="p">(</span><span class="s">'polls/index.html'</span><span class="p">)</span>
    <span class="n">context</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'latest_question_list'</span><span class="p">:</span> <span class="n">latest_question_list</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">request</span><span class="p">))</span>
</code></pre></div>
<ul>
<li>template(polls/index.html) load하고 context를 전달.</li>
</ul>

<p>context는 template변수 이름을 python 객체에 매핑하는 사전임.</p>

<h3 id="a-shortcut-render">
<a class="anchor" href="#a-shortcut-render" aria-hidden="true"><span class="octicon octicon-link"></span></a>A shortcut: render()</h3>

<p>Template을 load하고 context를 채우고 render된 template의 결과로 <strong>HttpResponse</strong> 객체를 반환하는 것은 매우 일반적인 관용구 임.
django는 바로가기를 제공합니다. 다음은 다시 작성된 전체 <strong>index()</strong> 뷰입니다.</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span>

<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Question</span>


<span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">latest_question_list</span> <span class="o">=</span> <span class="n">Question</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s">'-pub_date'</span><span class="p">)[:</span><span class="mi">5</span><span class="p">]</span>
    <span class="n">context</span> <span class="o">=</span> <span class="p">{</span><span class="s">'latest_question_list'</span><span class="p">:</span> <span class="n">latest_question_list</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'polls/index.html'</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
</code></pre></div>
<p>이러한 모든 view에서 이 작업을 완료하면 더 이상 <strong>loader</strong> 와 <strong>HttpResponse</strong> 를 가져올 필요가 없습니다. (<strong>HttpResponse</strong> 를 유지를 원한다면, 결과 및 투표를 위해 스텁 메서드가 있는 경우)</p>

<p>render(request, template name, dictionary)</p>

<p>지정된 context로 render된 지정된 template의 <strong>HttpResponse</strong> 객체를 반환.</p>

<hr>

<h2 id="raising-a-404-error">
<a class="anchor" href="#raising-a-404-error" aria-hidden="true"><span class="octicon octicon-link"></span></a>Raising a 404 error</h2>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">Http404</span>
<span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span>

<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Question</span>

<span class="c1"># ...
</span><span class="k">def</span> <span class="nf">detail</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">question_id</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">question</span> <span class="o">=</span> <span class="n">Question</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">question_id</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Question</span><span class="o">.</span><span class="n">DoesNotExist</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">Http404</span><span class="p">(</span><span class="s">"Question does not exist"</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'polls/detail.html'</span><span class="p">,</span> <span class="p">{</span><span class="s">'question'</span><span class="p">:</span> <span class="n">question</span><span class="p">})</span>
</code></pre></div>
<p>요청된 ID가 있는 질문이 없는 경우 보기에서 Http404 예외가 발생.</p>

<h3 id="a-shortcut-get_object_or_404">
<a class="anchor" href="#a-shortcut-get_object_or_404" aria-hidden="true"><span class="octicon octicon-link"></span></a>A shortcut: get_object_or_404()</h3>

<ul>
<li>get() 사용하고 객체가 존재하지 않으면 Http404를 발생시키는 것은 매우 일반적인 관용구.</li>
</ul>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">get_object_or_404</span><span class="p">,</span> <span class="n">render</span>

<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Question</span>
<span class="c1"># ...
</span><span class="k">def</span> <span class="nf">detail</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">question_id</span><span class="p">):</span>
    <span class="n">question</span> <span class="o">=</span> <span class="n">get_object_or_404</span><span class="p">(</span><span class="n">Question</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">question_id</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'polls/detail.html'</span><span class="p">,</span> <span class="p">{</span><span class="s">'question'</span><span class="p">:</span> <span class="n">question</span><span class="p">})</span>
</code></pre></div>
<p><strong>get_object_or_404()</strong></p>

<p>Django model을 첫 번째 인수로 사용,</p>

<p>임의의 수의 키워드 인수를 model 관리자의 get()에 전달.</p>

<p>객체가 존재하지 않으면 Http404를 발생.</p>
<div class="highlight"><pre><code class="language-" data-lang="">* Philosophy

상위 레벨에서 ObjectDoesNotExist 예외를 자동으로 catch하는 대신
get_object_or_404() 도우미 함수를 사용하거나 모델 API에서
ObjectDoesNotExist대신 Http404를 발생시키는 이유는 무엇입니까?

왜냐하면 model layer를 view layer에 연결하기 때문.

(핵심) 가장 중요한 설계 목표중 하나는 느슨한 결합을 유지하는 것.

Django.shortcuts 모듈에는 일부 제어 연결이 도입 됨.
</code></pre></div>
<p>또한 get_object_or_404() 처럼 작동하는 get_list_or_404() 함수가 있음.
- get() 대신 filter()를 사용하는 것을 제외하고는.
목록이 비어 있으면 Http404를 발생시킵니다.</p>

<hr>

<h2 id="use-the-template-system">
<a class="anchor" href="#use-the-template-system" aria-hidden="true"><span class="octicon octicon-link"></span></a>Use the template system</h2>

<p>설문 조사 신청서의 <strong>detail()</strong> 보기로 돌아감.</p>

<p>context 변수 <strong>question</strong> 이 주어지면 polls/detail.html template 이 다음과 같이 표시됨.</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!--polls/templates/polls/detail.html--&gt;</span>

<span class="nt">&lt;h1&gt;&lt;/h1&gt;</span>
<span class="nt">&lt;ul&gt;</span>

<span class="nt">&lt;/ul&gt;</span>
</code></pre></div>
<p>template 시스템은 dot-lookup 구문을 사용하여 변수 속성에 액세스 함.</p>

<p>예로 <strong>{{ question.question_text }}</strong> 첫째 <strong>question</strong> 에 대한 django dictionary 검색을 수행.
실패하면 속성 조회를 시도.
이 경우 속성이 작동함.
속성 조회가 실패한 경우 list-index 조회를 시도했을 것.</p>

<p><strong>{\% for \%}</strong> loop에서 Method-calling 발생시: <strong>question.choice_set.all</strong> 은 <strong>Choice</strong> 객체의 반복 가능을 반환하는 Python code <strong>question.choice_set.all()</strong> 으로 해석되며 <strong>{\% for \%}</strong> 루프에서 사용하기에 적합함.</p>

<p>Template의 대한 자세한 내용은 <a href="https://docs.djangoproject.com/en/1.10/topics/templates/">template guide</a> 를 참조.</p>

<hr>

<h2 id="removing-hardcoded-urls-in-templates">
<a class="anchor" href="#removing-hardcoded-urls-in-templates" aria-hidden="true"><span class="octicon octicon-link"></span></a>Removing hardcoded URLs in templates</h2>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!--Bad URLs--&gt;</span>

<span class="nt">&lt;li&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/polls//"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;/li&gt;</span>
</code></pre></div>
<p>이렇게 하드코딩되고 밀접하게 결합 된 방식의 문제점은 많은 템플릿을 사용하여
프로젝트의 URL을 변경하는 것이 어려워지는 것.
그러나 polls.urls 모듈의 url() 함수에서 name 인수를 정의 했으므로 <strong>{\% url \%}</strong>
템플릿 태그를 사용하여 URL 구성에 정의 된 특정 URL 경로에 대한 의존 관계를 제거 할 수 있습니다.</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!--Good URLs--&gt;</span>

<span class="nt">&lt;li&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{% url 'detail' question.id %}"</span><span class="nt">&gt;</span>
        {{ question.question_text }}
    <span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;/li&gt;</span>
</code></pre></div>
<p>이것이 작동하는 방식은 polls.urls 모듈에 지정된 URL 정의를 찾는 것.</p>

<p>'detail'의 URL 이름이 아래에 정의 된 위치를 정확히 볼 수 있음.</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">url</span><span class="p">(</span><span class="s">r'^(?P&lt;question_id&gt;[0-9]+)/$'</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">detail</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'detail'</span><span class="p">),</span>
</code></pre></div>
<p>아래 내용은 무엇을 의미하는지 모르겠음.</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="c1"># added the word 'specifics'
</span><span class="n">url</span><span class="p">(</span><span class="s">r'^specifics/(?P&lt;question_id&gt;[0-9]+)/$'</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">detail</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'detail'</span><span class="p">),</span>
</code></pre></div>
<hr>

<h2 id="namespacing-url-names">
<a class="anchor" href="#namespacing-url-names" aria-hidden="true"><span class="octicon octicon-link"></span></a>Namespacing URL Names</h2>

<ul>
<li>왜 필요한가?</li>
</ul>

<p>Projects에 5~20개 이상의 Apps 가 존재 가능.</p>

<ul>
<li>문제는?</li>
</ul>

<p>URL name 어떻게 구분?</p>

<p>설문 조사 응용 프로그램에는 세부 정보보기가 있으며, 블로그와 동일한 프로젝트의 응용 프로그램도 마찬가지입니다.</p>

<ul>
<li>어떻게 하는가?</li>
</ul>

<p><strong>{\% url \%}</strong> template tag를 사용할 때 어떤 apps 보기에서 URL을 만들 수 있는지 어떻게 알 수 있습니까?</p>

<p>URLconf에 namespace 를 추가.</p>

<p>./polls/urls.py 에서 app_name을 추가하여 apps 프로그램 namespace를 설정.</p>
<div class="highlight"><pre><code class="language-python" data-lang="python">  <span class="c1"># polls/urls.py
</span>
  <span class="n">app_name</span> <span class="o">=</span> <span class="s">'polls'</span>  <span class="c1"># XXX: update
</span>  <span class="n">url_patterns</span> <span class="o">=</span> <span class="p">[</span>
  <span class="c1"># ...
</span>  <span class="p">]</span>
</code></pre></div>
<p>네임 스페이스로 된 세부 view를 가리키기</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!--polls/templates/polls/index.html--&gt;</span>

<span class="nt">&lt;li&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{% url 'polls:detail' question.id %}"</span><span class="nt">&gt;</span>   <span class="c">&lt;!-- update --&gt;</span>
        {{ question.question_text }}
    <span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;/li&gt;</span>
</code></pre></div>
<h1 id="references">
<a class="anchor" href="#references" aria-hidden="true"><span class="octicon octicon-link"></span></a>References</h1>

<ul>
<li><a href="https://docs.djangoproject.com/en/1.10/topics/templates/">https://docs.djangoproject.com/en/1.10/topics/templates/</a></li>
</ul>

  </div>

<div>
  <p>Part 2 의 연장선</p>

<h2 id="overview">Overview</h2>

<ul>
<li>중요하지 않은 내용 생략</li>
</ul>

<p>Django에서는 웹 페이지와 다른 내용이 뷰에 의해 전달됩니다.</p>

<p>각 뷰는 간단한 파이썬 함수(또는 클래스 기반 뷰의 경우 메서드)로 표현.</p>

<p>Django는 요청 된 URL(정확히 말하면 도메인 이름 뒤에있는 URL의 일부)을 검사하여보기를 선택.</p>

<p>Django - simple 하고 일반적이며, 우아한 URL 패턴을 제공. (/newsarchive/&lt;year&gt;/&lt;month&gt;/)</p>

<p>Django는 URL을 view로 가져 오기 위해 'URLconfs'를 사용.</p>

<p>URLconfs는 URL패턴(정규 표현식으로 설명)을 view에 매핑함.</p>

<p>기본적으로 URLconfs 사용 (상세참조: django.urls)</p>

<hr>

<h2 id="writing-more-views">Writing more views</h2>

<p>polls/views.py</p>

<p>URL에 "/polls/34/"시 detail()를 실행하고 URL에 제공 한 모든 ID를 표시.
("/polls/34/results/", "/polls/34/vote/")</p>

<p>"/polls/34/"와 같은 페이지를 요청시 Django는 ROOT_URLCONF설정에 의해 가리켜지기 때문에 mysite.urls 의 Python module을 load.</p>

<p>urlpatterns라는 변수를 찾아 정규 표현식을 순차적으로 탐색.</p>

<p>'^polls/'에서 일치 항목을 찾은 후 일치하는 텍스트 ("polls/")를 제거.</p>

<p>나머지 텍스트("34/")를 추가 처리를 위해 'polls.urls'URLconf로 전송.</p>

<p>거기에 r'^(?P<question_id>[0-9]+)/$'와 일치하여 detail() 뷰(View)를 호출함.</question_id></p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">detail</span><span class="p">(</span><span class="n">request</span><span class="o">=&lt;</span><span class="n">HttpRequest</span> <span class="nb">object</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">question_id</span><span class="o">=</span><span class="s">'34'</span><span class="p">)</span>
</code></pre></div>
<p>question_id='34' 부분은 (?P<question_id>[0-9]+)에서 비롯 됨.</question_id></p>

<ul>
<li><p>패턴 주위의 '()'를 사용하면 해당 패턴과 일치하는 텍스트를 "캡처"하여 View기능에 인수로 전송.</p></li>
<li><p>?P<question_id>는 일치 패턴을 식별하는 데 사용할 이름을 정의함.</question_id></p></li>
<li><p>[0-9]+는 일련의 숫자(즉, 숫자)와 일치하는 정규 표현식 임.</p></li>
</ul>

<p>URL 패턴은 정규 표현식이기 때문에 실제로 할 수있는 것에는 제한이 없음.</p>

<p>원하는 경우가 아니라면 .html과 같은 URL cruft를 추가 할 필요가 없습니다.</p>

<p>이 경우 다음과 같이 할 수 있습니다.</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">url</span><span class="p">(</span><span class="s">r'^polls/latest.html$'</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">index</span><span class="p">),</span>
</code></pre></div>
<p>그러나 그렇게 하지 마십시오. 바보 같습니다.</p>

<hr>

<h2 id="write-views-that-actually-do-something">Write views that actually do something</h2>

<p>실제로 무언가 하는 View 작성하기</p>

<ul>
<li>
<p>각 View는 두 가지 중 하나를 수행.</p>

<ul>
<li>요청된 Page 내용을 포함하는 HttpResponse객체를 반환</li>
<li>Http404 같은 예외를 발생.</li>
<li>나머지는 작성자에 의해.</li>
</ul>
</li>
<li><p>작성자의 View는 Database에서 Record를 읽을 수도 있고 아닐 수도 있음.</p></li>
<li><p>Django나 Thrid-party Python 템플릿 시스템과 같은 템플릿 시스템을 사용할 수 있음.</p></li>
<li><p>PDF파일생성, ZIP파일생성, XML출력, Python Library 사용하여 원하는 것 만들 수 있음.</p></li>
</ul>

<p>Django가 원하는 것은 HttpResponse 또는 Exception.</p>

<p>편리하기 때문에 Part 2에서 다룬 Django의 자체 Database API를 사용.</p>

<p>게시날짜에 따라 : (콜론)으로 구분 된 최신 5개의 설문 질문을 시스템에 표시.</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="err">$</span> <span class="n">vi</span> <span class="o">./</span><span class="n">polls</span><span class="o">/</span><span class="n">views</span><span class="o">.</span><span class="n">py</span>

<span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">latest_question_list</span> <span class="o">=</span> <span class="n">Question</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s">'-pub_date'</span><span class="p">)[:</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span>
    <span class="n">output</span> <span class="o">=</span> <span class="s">', '</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">q</span><span class="o">.</span><span class="n">question_text</span> <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">latest_question_list</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
</code></pre></div>
<ul>
<li>여기에는 문제가 있습니다. 페이지의 디자인이보기에 하드 코딩되어 있습니다.</li>
</ul>

<p>페이지의 모양을 변경하려면이 Python 코드를 편집해야 함.</p>

<ul>
<li>따라서 django의 template 시스템을 사용하여 view가 사용할 수있는 template을</li>
</ul>

<p>생성하여 Python과 Design을 분리해야 함.</p>

<p>먼저
<code>bash
$ cd /polls/
$ mkdir templates
</code></p>

<p>Django는 거기에 있는 template 을 찾을 것.</p>

<p>프로젝트의 Template설정은 Django가 Template을 load하고 rendering 하는 방법을 설명.</p>

<p>기본설정 파일은 <strong>APP_DIRS</strong> 옵션이 <strong>True</strong> 로 설정된 DjangoTemplates 백엔드를 구성.</p>

<p>관습적으로 DjangoTemplates는 각 <strong>INSTALLED_APPS</strong> 에서 "templates" 하위 Dir를 찾음.</p>

<p>방금 생성한 ./templates/ 에서 ./polls/ 생성후 ./index.html 작성.</p>

<p>(./polls/templates/polls/index.html)</p>

<p>app_directories template loader가 위에서 설명한대로 작동하는 방식 때문에</p>

<p>Django에서 template을 간단하게 ./polls/index.html 로 참조 할 수 있음.</p>
<div class="highlight"><pre><code class="language-" data-lang="">* Template namespacing

이제 우리는 Templates를 다른 polls 서브 디렉토리를 작성하는 대신
polls/templates에 직접 넣을 수 있지만 실제로는 좋지 않은 아이디어.

Django는 이름이 일치하는 첫 번째 template을 선택.
다른 Application에 같은 이름의 template가 있는 경우, Django는 그것들을 구분할 수 없음.

올바른 것을 가리키는, 이것을 보장하는 가장 쉬운 방법은 namespacing를 지정하는 것.
즉, 다른 Directory 이름 application 자체에 해당 templates를 넣는 것임.

(Bad)  ./polls/template/index.html
(Good) ./polls/templates/polls/index.html
</code></pre></div><div class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!-- polls/templates/polls/index.html--&gt;</span>


    <span class="nt">&lt;p&gt;</span>No polls are available.<span class="nt">&lt;/p&gt;</span>

</code></pre></div><div class="highlight"><pre><code class="language-python" data-lang="python"><span class="c1"># polls/views.py
</span>
<span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponse</span>
<span class="kn">from</span> <span class="nn">django.template</span> <span class="kn">import</span> <span class="n">loader</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Question</span>


<span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">latest_question_list</span> <span class="o">=</span> <span class="n">Question</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s">'-pub_date'</span><span class="p">)[:</span><span class="mi">5</span><span class="p">]</span>
    <span class="n">template</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">get_template</span><span class="p">(</span><span class="s">'polls/index.html'</span><span class="p">)</span>
    <span class="n">context</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'latest_question_list'</span><span class="p">:</span> <span class="n">latest_question_list</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">request</span><span class="p">))</span>
</code></pre></div>
<ul>
<li>template(polls/index.html) load하고 context를 전달.</li>
</ul>

<p>context는 template변수 이름을 python 객체에 매핑하는 사전임.</p>

<h3 id="a-shortcut-render">A shortcut: render()</h3>

<p>Template을 load하고 context를 채우고 render된 template의 결과로 <strong>HttpResponse</strong> 객체를 반환하는 것은 매우 일반적인 관용구 임.
django는 바로가기를 제공합니다. 다음은 다시 작성된 전체 <strong>index()</strong> 뷰입니다.</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span>

<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Question</span>


<span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">latest_question_list</span> <span class="o">=</span> <span class="n">Question</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s">'-pub_date'</span><span class="p">)[:</span><span class="mi">5</span><span class="p">]</span>
    <span class="n">context</span> <span class="o">=</span> <span class="p">{</span><span class="s">'latest_question_list'</span><span class="p">:</span> <span class="n">latest_question_list</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'polls/index.html'</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
</code></pre></div>
<p>이러한 모든 view에서 이 작업을 완료하면 더 이상 <strong>loader</strong> 와 <strong>HttpResponse</strong> 를 가져올 필요가 없습니다. (<strong>HttpResponse</strong> 를 유지를 원한다면, 결과 및 투표를 위해 스텁 메서드가 있는 경우)</p>

<p>render(request, template name, dictionary)</p>

<p>지정된 context로 render된 지정된 template의 <strong>HttpResponse</strong> 객체를 반환.</p>

<hr>

<h2 id="raising-a-404-error">Raising a 404 error</h2>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">Http404</span>
<span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span>

<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Question</span>

<span class="c1"># ...
</span><span class="k">def</span> <span class="nf">detail</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">question_id</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">question</span> <span class="o">=</span> <span class="n">Question</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">question_id</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Question</span><span class="o">.</span><span class="n">DoesNotExist</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">Http404</span><span class="p">(</span><span class="s">"Question does not exist"</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'polls/detail.html'</span><span class="p">,</span> <span class="p">{</span><span class="s">'question'</span><span class="p">:</span> <span class="n">question</span><span class="p">})</span>
</code></pre></div>
<p>요청된 ID가 있는 질문이 없는 경우 보기에서 Http404 예외가 발생.</p>

<h3 id="a-shortcut-get_object_or_404">A shortcut: get_object_or_404()</h3>

<ul>
<li>get() 사용하고 객체가 존재하지 않으면 Http404를 발생시키는 것은 매우 일반적인 관용구.</li>
</ul>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">get_object_or_404</span><span class="p">,</span> <span class="n">render</span>

<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Question</span>
<span class="c1"># ...
</span><span class="k">def</span> <span class="nf">detail</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">question_id</span><span class="p">):</span>
    <span class="n">question</span> <span class="o">=</span> <span class="n">get_object_or_404</span><span class="p">(</span><span class="n">Question</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">question_id</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'polls/detail.html'</span><span class="p">,</span> <span class="p">{</span><span class="s">'question'</span><span class="p">:</span> <span class="n">question</span><span class="p">})</span>
</code></pre></div>
<p><strong>get_object_or_404()</strong></p>

<p>Django model을 첫 번째 인수로 사용,</p>

<p>임의의 수의 키워드 인수를 model 관리자의 get()에 전달.</p>

<p>객체가 존재하지 않으면 Http404를 발생.</p>
<div class="highlight"><pre><code class="language-" data-lang="">* Philosophy

상위 레벨에서 ObjectDoesNotExist 예외를 자동으로 catch하는 대신
get_object_or_404() 도우미 함수를 사용하거나 모델 API에서
ObjectDoesNotExist대신 Http404를 발생시키는 이유는 무엇입니까?

왜냐하면 model layer를 view layer에 연결하기 때문.

(핵심) 가장 중요한 설계 목표중 하나는 느슨한 결합을 유지하는 것.

Django.shortcuts 모듈에는 일부 제어 연결이 도입 됨.
</code></pre></div>
<p>또한 get_object_or_404() 처럼 작동하는 get_list_or_404() 함수가 있음.
- get() 대신 filter()를 사용하는 것을 제외하고는.
목록이 비어 있으면 Http404를 발생시킵니다.</p>

<hr>

<h2 id="use-the-template-system">Use the template system</h2>

<p>설문 조사 신청서의 <strong>detail()</strong> 보기로 돌아감.</p>

<p>context 변수 <strong>question</strong> 이 주어지면 polls/detail.html template 이 다음과 같이 표시됨.</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!--polls/templates/polls/detail.html--&gt;</span>

<span class="nt">&lt;h1&gt;&lt;/h1&gt;</span>
<span class="nt">&lt;ul&gt;</span>

<span class="nt">&lt;/ul&gt;</span>
</code></pre></div>
<p>template 시스템은 dot-lookup 구문을 사용하여 변수 속성에 액세스 함.</p>

<p>예로 <strong>{{ question.question_text }}</strong> 첫째 <strong>question</strong> 에 대한 django dictionary 검색을 수행.
실패하면 속성 조회를 시도.
이 경우 속성이 작동함.
속성 조회가 실패한 경우 list-index 조회를 시도했을 것.</p>

<p><strong>{\% for \%}</strong> loop에서 Method-calling 발생시: <strong>question.choice_set.all</strong> 은 <strong>Choice</strong> 객체의 반복 가능을 반환하는 Python code <strong>question.choice_set.all()</strong> 으로 해석되며 <strong>{\% for \%}</strong> 루프에서 사용하기에 적합함.</p>

<p>Template의 대한 자세한 내용은 <a href="https://docs.djangoproject.com/en/1.10/topics/templates/" rel="nofollow" target="_blank">template guide</a> 를 참조.</p>

<hr>

<h2 id="removing-hardcoded-urls-in-templates">Removing hardcoded URLs in templates</h2>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!--Bad URLs--&gt;</span>

<span class="nt">&lt;li&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/polls//"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;/li&gt;</span>
</code></pre></div>
<p>이렇게 하드코딩되고 밀접하게 결합 된 방식의 문제점은 많은 템플릿을 사용하여
프로젝트의 URL을 변경하는 것이 어려워지는 것.
그러나 polls.urls 모듈의 url() 함수에서 name 인수를 정의 했으므로 <strong>{\% url \%}</strong>
템플릿 태그를 사용하여 URL 구성에 정의 된 특정 URL 경로에 대한 의존 관계를 제거 할 수 있습니다.</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!--Good URLs--&gt;</span>

<span class="nt">&lt;li&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{% url 'detail' question.id %}"</span><span class="nt">&gt;</span>
        {{ question.question_text }}
    <span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;/li&gt;</span>
</code></pre></div>
<p>이것이 작동하는 방식은 polls.urls 모듈에 지정된 URL 정의를 찾는 것.</p>

<p>'detail'의 URL 이름이 아래에 정의 된 위치를 정확히 볼 수 있음.</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">url</span><span class="p">(</span><span class="s">r'^(?P&lt;question_id&gt;[0-9]+)/$'</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">detail</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'detail'</span><span class="p">),</span>
</code></pre></div>
<p>아래 내용은 무엇을 의미하는지 모르겠음.</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="c1"># added the word 'specifics'
</span><span class="n">url</span><span class="p">(</span><span class="s">r'^specifics/(?P&lt;question_id&gt;[0-9]+)/$'</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">detail</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'detail'</span><span class="p">),</span>
</code></pre></div>
<hr>

<h2 id="namespacing-url-names">Namespacing URL Names</h2>

<ul>
<li>왜 필요한가?</li>
</ul>

<p>Projects에 5~20개 이상의 Apps 가 존재 가능.</p>

<ul>
<li>문제는?</li>
</ul>

<p>URL name 어떻게 구분?</p>

<p>설문 조사 응용 프로그램에는 세부 정보보기가 있으며, 블로그와 동일한 프로젝트의 응용 프로그램도 마찬가지입니다.</p>

<ul>
<li>어떻게 하는가?</li>
</ul>

<p><strong>{\% url \%}</strong> template tag를 사용할 때 어떤 apps 보기에서 URL을 만들 수 있는지 어떻게 알 수 있습니까?</p>

<p>URLconf에 namespace 를 추가.</p>

<p>./polls/urls.py 에서 app_name을 추가하여 apps 프로그램 namespace를 설정.</p>
<div class="highlight"><pre><code class="language-python" data-lang="python">  <span class="c1"># polls/urls.py
</span>
  <span class="n">app_name</span> <span class="o">=</span> <span class="s">'polls'</span>  <span class="c1"># XXX: update
</span>  <span class="n">url_patterns</span> <span class="o">=</span> <span class="p">[</span>
  <span class="c1"># ...
</span>  <span class="p">]</span>
</code></pre></div>
<p>네임 스페이스로 된 세부 view를 가리키기</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!--polls/templates/polls/index.html--&gt;</span>

<span class="nt">&lt;li&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{% url 'polls:detail' question.id %}"</span><span class="nt">&gt;</span>   <span class="c">&lt;!-- update --&gt;</span>
        {{ question.question_text }}
    <span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;/li&gt;</span>
</code></pre></div>
<h1 id="references">References</h1>

<ul>
<li><a href="https://docs.djangoproject.com/en/1.10/topics/templates/" rel="nofollow" target="_blank">https://docs.djangoproject.com/en/1.10/topics/templates/</a></li>
</ul>

</div>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/blog/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Portal2312&#39;s blog</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Portal2312&#39;s blog</li><li><a class="u-email" href="mailto:portal2312@gmail.com">portal2312@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/portal2312"><svg class="svg-icon"><use xlink:href="/blog/assets/minima-social-icons.svg#github"></use></svg> <span class="username">portal2312</span></a></li><li><a href="https://www.twitter.com/portal2312"><svg class="svg-icon"><use xlink:href="/blog/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">portal2312</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Welcome to my blog.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
