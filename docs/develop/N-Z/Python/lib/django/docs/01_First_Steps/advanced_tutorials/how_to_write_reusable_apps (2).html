<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>How to write reusable apps | Portal2312&#39;s blog</title>
<meta name="generator" content="Jekyll v3.8.6" />
<meta property="og:title" content="How to write reusable apps" />
<meta name="author" content="mkkim" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="First Steps &gt; tutorial &gt; part_7_customizing_the_admin_site.md 연장해서 하기" />
<meta property="og:description" content="First Steps &gt; tutorial &gt; part_7_customizing_the_admin_site.md 연장해서 하기" />
<link rel="canonical" href="/blog/docs/develop/N-Z/Python/lib/django/docs/01_First_Steps/advanced_tutorials/how_to_write_reusable_apps%20(2).html" />
<meta property="og:url" content="/blog/docs/develop/N-Z/Python/lib/django/docs/01_First_Steps/advanced_tutorials/how_to_write_reusable_apps%20(2).html" />
<meta property="og:site_name" content="Portal2312&#39;s blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-12-02T16:38:51+09:00" />
<script type="application/ld+json">
{"description":"First Steps &gt; tutorial &gt; part_7_customizing_the_admin_site.md 연장해서 하기","headline":"How to write reusable apps","dateModified":"2019-12-02T16:38:51+09:00","datePublished":"2019-12-02T16:38:51+09:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"/blog/docs/develop/N-Z/Python/lib/django/docs/01_First_Steps/advanced_tutorials/how_to_write_reusable_apps%20(2).html"},"url":"/blog/docs/develop/N-Z/Python/lib/django/docs/01_First_Steps/advanced_tutorials/how_to_write_reusable_apps%20(2).html","author":{"@type":"Person","name":"mkkim"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href='/blog/assets/main.css'><link type="application/atom+xml" rel="alternate" href="/blog/feed.xml" title="Portal2312's blog" /><script>
if(!(window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1")) {
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-113063601-1', 'auto');
  ga('send', 'pageview');
}
</script>
  
<script src='/blog/dist/js/common.bundle.js'></script>
</head>
<body><header class="site-header" role="banner">
  <div class="wrapper">
    <a class="site-title" rel="author" href="/blog/">Portal2312&#39;s blog</a>
    <nav class="site-nav">
    <input type="checkbox" id="nav-trigger" class="nav-trigger" />
    <label for="nav-trigger">
      <span class="menu-icon">
        <svg viewBox="0 0 18 15" width="18px" height="15px">
          <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
        </svg>
      </span>
    </label>

    <div class="trigger"><a class="page-link" href="/blog/about.html">
            About
          </a><a class="page-link" href="/blog/posts.html">
            Posts
          </a><a class="page-link" href="/blog/history.html">
            History
          </a><a class="page-link" href="/blog/docs/index.html">
            Docs
          </a></div>
  </nav>
  </div>
  <div class="scroll-indicator-container">
  <div class="scroll-indicator-bar" id="scrollIndicatorBar"></div>
</div>

</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <h1>How to write reusable apps</h1>

  <div>
    <h2>Table of contents</h2>
    <ul class="section-nav">
<li class="toc-entry toc-h2"><a href="#reusability-matters">Reusability matters</a></li>
<li class="toc-entry toc-h2"><a href="#your-project-and-your-reusable-app">Your project and your reusable app</a></li>
<li class="toc-entry toc-h2"><a href="#installing-some-prerequisites">Installing some prerequisites</a></li>
<li class="toc-entry toc-h2"><a href="#packaging-your-app">Packaging your app</a></li>
<li class="toc-entry toc-h2"><a href="#using-your-own-package">Using your own package</a></li>
<li class="toc-entry toc-h2"><a href="#publishing-your-app">Publishing your app</a></li>
<li class="toc-entry toc-h2"><a href="#installing-python-packages-with-virtualenv">Installing Python packages with virtualenv</a></li>
<li class="toc-entry toc-h1"><a href="#reference">Reference</a>
<ul>
<li class="toc-entry toc-h2"><a href="#except">Except</a>
<ul>
<li class="toc-entry toc-h3"><a href="#pip-install-user-django-polls-dist-django-polls-0-1-tar-gz">pip install --user django-polls/dist/django-polls-0.1.tar.gz</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#url">URL</a></li>
</ul>
</li>
</ul><p>First Steps &gt; tutorial &gt; part_7_customizing_the_admin_site.md 연장해서 하기</p>

<h2 id="reusability-matters">
<a class="anchor" href="#reusability-matters" aria-hidden="true"><span class="octicon octicon-link"></span></a>Reusability matters</h2>

<p>웹 응용 프로그램을 설계, 구축, 테스트 및 유지 관리하는 작업이 많음.
많은 Python과 Django 프로젝트는 공통적인 문제를 공유함.
이 반복 작업 중 일부를 저장할 수 있다면 좋지 않을까?</p>

<p>재사용성은 파이썬에서의 삶의 방식임.
<em>Python Package Index(PyPI)</em>
Python 프로그램에서 사용할 수있는 방대한 패키지가 있음.
프로젝트에 통합할 수 있는 재사용 가능한 기존 application을
위한 django package를 확인하십시오.</p>

<p>Django 자체도 Python package임.
즉, 기존 Python packages or Django apps을 가져 와서 자신의 웹 프로젝트로 구성 가능.
Projects를 고유하게 만드는 부분만 작성하면 됨.
우리가 작업 한 것과 같은 polls application을 필요로 하는 new Projects를 시작을
가정할 때 이 Apps을 어떻게 재사용 할 수있게 합니까? 다행히도 이미 했음.
Tutorial 3에서는 <strong>include</strong> 를 사용하여 Projects 레벨 URLconf에서 polls을
분리 할 수 있는 방법을 살펴 보았음.</p>

<p>이 자습서에서는 new Projects에 Apps을 쉽게 사용할 수 있도록 하고 다른 사람들이
설치하고 사용할 수 있도록 게시할 준비를 하기 위한 추가 단계를 취할 것.</p>
<div class="highlight"><pre><code class="language-" data-lang="">* Package? App?

Python package

- 재사용을 쉽게하기 위해 관련된 Python Code를 그룹화하는 방법을 제공함.
- 하나 이상의 Python code file("module" 이라고도 함)이 있음.
- "import foo.bar" or "from foo import bar" 에서 가져올 수 있음.
- package 형성하기 위한 polls과 같은 Dir의 경우, 이 파일이 비어 있더라도
  __init__.py라는 특수 파일을 포함해야 함.

Django application

- Django projects에서 사용하기 위해 특별히 고안된 Python package.
- models, tests, urls, 그리고 views 서브모듈과 같은 일반적인 Django 규칙을 사용가능.

나중에 우리는 package라는 용어를 사용하여 다른 사람들이 쉽게 설치할 수 있도록
Python package를 만드는 과정을 설명함. 조금 혼란스러울 수 있음.
</code></pre></div>
<hr>

<h2 id="your-project-and-your-reusable-app">
<a class="anchor" href="#your-project-and-your-reusable-app" aria-hidden="true"><span class="octicon octicon-link"></span></a>Your project and your reusable app</h2>

<p>현재 mysite Projects Directory 구조</p>
<div class="highlight"><pre><code class="language-" data-lang="">mysite/
    manage.py
    mysite/
        __init__.py
        settings.py
        urls.py
        wsgi.py
    polls/
        __init__.py
        admin.py
        migrations/
            __init__.py
            0001_initial.py
        models.py
        static/
            polls/
                images/
                    background.gif
                style.css
        templates/                 &lt;-- Apps ../polls/templates/polls
            polls/
                detail.html
                index.html
                results.html
        tests.py
        urls.py
        views.py
    templates/                      &lt;-- Admin ../mysite/templates/admin
        admin/
            base_site.html
</code></pre></div>
<hr>

<h2 id="installing-some-prerequisites">
<a class="anchor" href="#installing-some-prerequisites" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installing some prerequisites</h2>

<p>Python packaging의 현재 상태는 다양한 도구로 약간 혼란스럽습니다.</p>

<p>이 튜토리얼에서는 setuptools를 사용하여 패키지를 빌드 할 것임.
이는 권장 패키징 도구(<strong>distribute</strong> fork와 병합 됨)임.</p>

<p>또한 pip를 사용하여 pip를 설치하고 제거함.
이 두 패키지를 지금 설치해야 함.
도움이 필요하면 pip와 함께 Django를 설치하는 방법을 참조.
같은 방법으로 <strong>setuptools</strong> 를 설치할 수 있음.</p>

<hr>

<h2 id="packaging-your-app">
<a class="anchor" href="#packaging-your-app" aria-hidden="true"><span class="octicon octicon-link"></span></a>Packaging your app</h2>

<p>Python 의 <em>packaging</em></p>

<p>쉽게 설치하고 사용할 수 있는 특정 형식으로 app 을 준비하는 것을 의미.</p>

<p>Django 자체는 이와 같이 매우 패키지화 되어 있음.</p>

<ol>
<li>
<p>Django Project 외부에서 <strong>polls</strong> 를 위한 부모 Dir(<strong>django-polls</strong> 이라 부름) 생성.</p>
<div class="highlight"><pre><code class="language-" data-lang="">  * Choosing a name for your app

  - Package명 선택시 기존 package의 충돌 피하기 위해 PyPI와 같은 리소스를 확인하기.

  - 배포 할 package만들 때 django-to module명을 앞에 추가하는 것이 유용.

    다른 사용자가 apps을 django를 고유로 식별 가능.

  - Application lables
    (즉, application packages의 점으로 구분 된 경로의 마지막 부분)
    - INSTALLED_APPS에서 고유해야 함.
    - Django contrib packages와 동일한 label을 사용하지 마십시오.
      (ex: auth, admin or messages)
</code></pre></div>
</li>
<li><p><strong>polls</strong> Dir을 <strong>django-polls</strong> Dir으로 이동.</p></li>
<li>
<p><strong>django-polls/README.rst</strong> 생성 후 아래 내용 작성:</p>
<div class="highlight"><pre><code class="language-rst" data-lang="rst">  =====
  Polls
  =====

  Polls is a simple Django app to conduct Web-based polls. For each
  question, visitors can choose between a fixed number of answers.

  Detailed documentation is in the "docs" directory.

  Quick start
  -----------

  1. Add "polls" to your INSTALLED_APPS setting like this::

      INSTALLED_APPS = [
          ...
          'polls',
      ]

  2. Include the polls URLconf in your project urls.py like this::

      url(r'^polls/', include('polls.urls')),

  3. Run `python manage.py migrate` to create the polls models.

  4. Start the development server and visit http://127.0.0.1:8000/admin/
     to create a poll (you'll need the Admin app enabled).

  5. Visit http://127.0.0.1:8000/polls/ to participate in the poll.
</code></pre></div>
</li>
<li>
<p>django-polls/LICENSE 생성</p>

<p>LICENSE를 선택하는 것은 이 자습서의 범위를 벗어나지 만,
  LICENSE 없이 공개적으로 release된 코드는 쓸모가 없다고 말하는 것으로 충분함.</p>

<p>Django와 많은 Django-compatible apps은 BSD LICENSE에 따라 배포됨.
  그러나, 당신은 자신의 라이센스를 자유롭게 선택할 수 있음.
  라이선스 선택이 누가 코드를 사용할 수 있는지에 영향을 미친다는 점에 유의.</p>
</li>
<li>
<p>django-polls/setup.py 생성</p>

<p>다음으로 우리는 app을 build하고 설치하는 방법에 대한 세부 사항을 제공.
  이 파일의 전체 설명은이 튜토리얼 범위를 벗어나지 만, setuptools 문서에는 좋은 설명이 있음.</p>

<p>django-polls/setup.py 작성 내용:</p>
<div class="highlight"><pre><code class="language-python" data-lang="python">  <span class="kn">import</span> <span class="nn">os</span>
  <span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">find_packages</span><span class="p">,</span> <span class="n">setup</span>

  <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">__file__</span><span class="p">),</span> <span class="s">'README.rst'</span><span class="p">))</span> <span class="k">as</span> <span class="n">readme</span><span class="p">:</span>
      <span class="n">README</span> <span class="o">=</span> <span class="n">readme</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

  <span class="c1"># allow setup.py to be run from any path
</span>  <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">__file__</span><span class="p">),</span> <span class="n">os</span><span class="o">.</span><span class="n">pardir</span><span class="p">)))</span>

  <span class="n">setup</span><span class="p">(</span>
      <span class="n">name</span><span class="o">=</span><span class="s">'django-polls'</span><span class="p">,</span>
      <span class="n">version</span><span class="o">=</span><span class="s">'0.1'</span><span class="p">,</span>
      <span class="n">packages</span><span class="o">=</span><span class="n">find_packages</span><span class="p">(),</span>
      <span class="n">include_package_data</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
      <span class="n">license</span><span class="o">=</span><span class="s">'BSD License'</span><span class="p">,</span>  <span class="c1"># example license
</span>      <span class="n">description</span><span class="o">=</span><span class="s">'A simple Django app to conduct Web-based polls.'</span><span class="p">,</span>
      <span class="n">long_description</span><span class="o">=</span><span class="n">README</span><span class="p">,</span>
      <span class="n">url</span><span class="o">=</span><span class="s">'https://www.example.com/'</span><span class="p">,</span>
      <span class="n">author</span><span class="o">=</span><span class="s">'Your Name'</span><span class="p">,</span>
      <span class="n">author_email</span><span class="o">=</span><span class="s">'yourname@example.com'</span><span class="p">,</span>
      <span class="n">classifiers</span><span class="o">=</span><span class="p">[</span>
          <span class="s">'Environment :: Web Environment'</span><span class="p">,</span>
          <span class="s">'Framework :: Django'</span><span class="p">,</span>
          <span class="s">'Framework :: Django :: X.Y'</span><span class="p">,</span>  <span class="c1"># replace "X.Y" as appropriate
</span>          <span class="s">'Intended Audience :: Developers'</span><span class="p">,</span>
          <span class="s">'License :: OSI Approved :: BSD License'</span><span class="p">,</span>  <span class="c1"># example license
</span>          <span class="s">'Operating System :: OS Independent'</span><span class="p">,</span>
          <span class="s">'Programming Language :: Python'</span><span class="p">,</span>
          <span class="c1"># Replace these appropriately if you are stuck on Python 2.
</span>          <span class="s">'Programming Language :: Python :: 3'</span><span class="p">,</span>
          <span class="s">'Programming Language :: Python :: 3.4'</span><span class="p">,</span>
          <span class="s">'Programming Language :: Python :: 3.5'</span><span class="p">,</span>
          <span class="s">'Topic :: Internet :: WWW/HTTP'</span><span class="p">,</span>
          <span class="s">'Topic :: Internet :: WWW/HTTP :: Dynamic Content'</span><span class="p">,</span>
      <span class="p">],</span>
  <span class="p">)</span>
</code></pre></div>
</li>
<li>
<p>기본적으로 python modules과 package만 패키지에 포함되어 있음.
추가 파일을 포함 시키려면 <strong>MANIFEST.in</strong> 파일을 만들어야 함.
이전 단계에서 언급 한 setuptools 문서에서 이 파일에 대해 더 자세히 설명함.
템플릿, README.rst 및 LICENSE 파일을 포함 시키려면 다음 내용으로 django-polls/MANIFEST.in 파일을 만듬.</p>
<div class="highlight"><pre><code class="language-" data-lang="">  # django-polls/MANIFEST.in

  include LICENSE
  include README.rst
  recursive-include polls/static *
  recursive-include polls/templates *
</code></pre></div>
</li>
<li>
<p>선택사항이지만 app에 자세한 문서를 포함하는 것이 좋음.
<strong>django-polls/docs</strong> 만들어 미래의 문서화.
<strong>django-polls/MANIFEST.in</strong> 에 아래 행을 추가:</p>
<div class="highlight"><pre><code class="language-" data-lang="">  recursive-include docs *
</code></pre></div>
<p>일부 파일을 추가하지 않으면 docs Dir이 패키지에 포함되지 않음.
  많은 Django apps은 readthedocs.org와 같은 사이트를 통해 oneline Doc를 제공함.</p>
</li>
<li>
<p>package build &amp; check</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">  <span class="nv">$ </span><span class="nb">cd </span>django-polls
  <span class="nv">$ </span>python setup.py sdist

  <span class="c"># ...</span>

  <span class="nv">$ </span><span class="nb">cd </span>dist
  <span class="nv">$ </span><span class="nb">ls

  </span>django-polls-0.1.tar.gz
</code></pre></div>
</li>
</ol>

<p>Packaging 자세한 내용: <a href="https://packaging.python.org/en/latest/distributing.html">Python Tutorial on Packaging and Distributing Projects</a></p>

<hr>

<h2 id="using-your-own-package">
<a class="anchor" href="#using-your-own-package" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using your own package</h2>

<p><strong>polls</strong> Dir를 프로젝트 밖으로 이동 했으므로 더 이상 작동하지 않습니다.
이제 new <strong>django-polls</strong> package를 설치하여이 문제를 해결할 것.</p>
<div class="highlight"><pre><code class="language-" data-lang="">* Installing as a user library

다음 단계는 django-polls를 사용자 라이브러리로 설치.
사용자 단위 설치는 관리자 액세스 권한이없는 시스템에서뿐만 아니라 패키지가
시스템 서비스 및 시스템의 다른 사용자에게 영향을 미치지 않도록하는 등
시스템 전체에 패키지를 설치하는 것보다 많은 장점이 있음.

사용자별 설치는 해당 사용자로 실행되는 시스템 도구의 동작에
영향을 미칠 수 있으므로 virtualenv는보다 강력한 솔루션입니다 (아래 참조).
</code></pre></div>
<ol>
<li>
<p>pip install (잘 안됨)</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">  pip <span class="nb">install</span> <span class="nt">--user</span> django-polls/dist/django-polls-0.1.tar.gz
</code></pre></div>
</li>
<li><p>설치가 잘되면 Django projects가 올바르게 다시 작동해야 함. (서버를 다시 실행)</p></li>
<li>
<p>uninstall package (pip)</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">  pip uninstall django-polls
</code></pre></div>
</li>
</ol>

<hr>

<h2 id="publishing-your-app">
<a class="anchor" href="#publishing-your-app" aria-hidden="true"><span class="octicon octicon-link"></span></a>Publishing your app</h2>

<p>이제 django-polls를 패키지화 하고 테스트 했으므로 이제는 세계와 공유 할 준비됨!
이것이 단순한 예가 아니라면 다음과 같이 할 수 있습니다.</p>

<ul>
<li><p>Email 로 package 보내기</p></li>
<li><p>website 에 upload 하기</p></li>
<li><p>패키지를 Python Package Index(PyPI)와 같은 public repository에 게시.
packaging.python.org에는 이를 수행하는 데 <a href="https://packaging.python.org/distributing/#uploading-your-project-to-pypi">a good tutorial</a>가 있음.</p></li>
</ul>

<hr>

<h2 id="installing-python-packages-with-virtualenv">
<a class="anchor" href="#installing-python-packages-with-virtualenv" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installing Python packages with virtualenv</h2>

<p>앞에서 우리는 설문 조사 앱을 사용자 라이브러리로 설치했습니다. 여기에는 몇 가지 단점이 있습니다.</p>

<ul>
<li><p>사용자 라이브러리를 수정하면 시스템의 다른 Python 소프트웨어에 영향을 미칠 수 있습니다.</p></li>
<li><p>이 패키지의 여러 버전 (또는 같은 이름의 다른 버전)을 실행할 수 없습니다.</p></li>
</ul>

<p>일반적으로 이러한 상황은 장고 프로젝트를 여러 번 유지해야만 발생합니다. 그들이 할 때, 최선의 해결책은 virtualenv를 사용하는 것입니다. 이 도구를 사용하면 라이브러리 및 패키지 네임 스페이스의 자체 복사본이있는 여러 격리 된 Python 환경을 유지 관리 할 수 ​​있습니다.</p>

<h1 id="reference">
<a class="anchor" href="#reference" aria-hidden="true"><span class="octicon octicon-link"></span></a><em>Reference</em>
</h1>

<h2 id="except">
<a class="anchor" href="#except" aria-hidden="true"><span class="octicon octicon-link"></span></a>Except</h2>

<h3 id="pip-install-user-django-polls-dist-django-polls-0-1-tar-gz">
<a class="anchor" href="#pip-install-user-django-polls-dist-django-polls-0-1-tar-gz" aria-hidden="true"><span class="octicon octicon-link"></span></a>pip install --user django-polls/dist/django-polls-0.1.tar.gz</h3>

<p>실행해도 안됨</p>

<h2 id="url">
<a class="anchor" href="#url" aria-hidden="true"><span class="octicon octicon-link"></span></a>URL</h2>

<ul>
<li><p><a href="https://packaging.python.org/en/latest/distributing.html">https://packaging.python.org/en/latest/distributing.html</a></p></li>
<li><p><a href="https://packaging.python.org/distributing/#uploading-your-project-to-pypi">https://packaging.python.org/distributing/#uploading-your-project-to-pypi</a></p></li>
</ul>

  </div>

<div>
  <p>First Steps &gt; tutorial &gt; part_7_customizing_the_admin_site.md 연장해서 하기</p>

<h2 id="reusability-matters">Reusability matters</h2>

<p>웹 응용 프로그램을 설계, 구축, 테스트 및 유지 관리하는 작업이 많음.
많은 Python과 Django 프로젝트는 공통적인 문제를 공유함.
이 반복 작업 중 일부를 저장할 수 있다면 좋지 않을까?</p>

<p>재사용성은 파이썬에서의 삶의 방식임.
<em>Python Package Index(PyPI)</em>
Python 프로그램에서 사용할 수있는 방대한 패키지가 있음.
프로젝트에 통합할 수 있는 재사용 가능한 기존 application을
위한 django package를 확인하십시오.</p>

<p>Django 자체도 Python package임.
즉, 기존 Python packages or Django apps을 가져 와서 자신의 웹 프로젝트로 구성 가능.
Projects를 고유하게 만드는 부분만 작성하면 됨.
우리가 작업 한 것과 같은 polls application을 필요로 하는 new Projects를 시작을
가정할 때 이 Apps을 어떻게 재사용 할 수있게 합니까? 다행히도 이미 했음.
Tutorial 3에서는 <strong>include</strong> 를 사용하여 Projects 레벨 URLconf에서 polls을
분리 할 수 있는 방법을 살펴 보았음.</p>

<p>이 자습서에서는 new Projects에 Apps을 쉽게 사용할 수 있도록 하고 다른 사람들이
설치하고 사용할 수 있도록 게시할 준비를 하기 위한 추가 단계를 취할 것.</p>
<div class="highlight"><pre><code class="language-" data-lang="">* Package? App?

Python package

- 재사용을 쉽게하기 위해 관련된 Python Code를 그룹화하는 방법을 제공함.
- 하나 이상의 Python code file("module" 이라고도 함)이 있음.
- "import foo.bar" or "from foo import bar" 에서 가져올 수 있음.
- package 형성하기 위한 polls과 같은 Dir의 경우, 이 파일이 비어 있더라도
  __init__.py라는 특수 파일을 포함해야 함.

Django application

- Django projects에서 사용하기 위해 특별히 고안된 Python package.
- models, tests, urls, 그리고 views 서브모듈과 같은 일반적인 Django 규칙을 사용가능.

나중에 우리는 package라는 용어를 사용하여 다른 사람들이 쉽게 설치할 수 있도록
Python package를 만드는 과정을 설명함. 조금 혼란스러울 수 있음.
</code></pre></div>
<hr>

<h2 id="your-project-and-your-reusable-app">Your project and your reusable app</h2>

<p>현재 mysite Projects Directory 구조</p>
<div class="highlight"><pre><code class="language-" data-lang="">mysite/
    manage.py
    mysite/
        __init__.py
        settings.py
        urls.py
        wsgi.py
    polls/
        __init__.py
        admin.py
        migrations/
            __init__.py
            0001_initial.py
        models.py
        static/
            polls/
                images/
                    background.gif
                style.css
        templates/                 &lt;-- Apps ../polls/templates/polls
            polls/
                detail.html
                index.html
                results.html
        tests.py
        urls.py
        views.py
    templates/                      &lt;-- Admin ../mysite/templates/admin
        admin/
            base_site.html
</code></pre></div>
<hr>

<h2 id="installing-some-prerequisites">Installing some prerequisites</h2>

<p>Python packaging의 현재 상태는 다양한 도구로 약간 혼란스럽습니다.</p>

<p>이 튜토리얼에서는 setuptools를 사용하여 패키지를 빌드 할 것임.
이는 권장 패키징 도구(<strong>distribute</strong> fork와 병합 됨)임.</p>

<p>또한 pip를 사용하여 pip를 설치하고 제거함.
이 두 패키지를 지금 설치해야 함.
도움이 필요하면 pip와 함께 Django를 설치하는 방법을 참조.
같은 방법으로 <strong>setuptools</strong> 를 설치할 수 있음.</p>

<hr>

<h2 id="packaging-your-app">Packaging your app</h2>

<p>Python 의 <em>packaging</em></p>

<p>쉽게 설치하고 사용할 수 있는 특정 형식으로 app 을 준비하는 것을 의미.</p>

<p>Django 자체는 이와 같이 매우 패키지화 되어 있음.</p>

<ol>
<li>
<p>Django Project 외부에서 <strong>polls</strong> 를 위한 부모 Dir(<strong>django-polls</strong> 이라 부름) 생성.</p>
<div class="highlight"><pre><code class="language-" data-lang="">  * Choosing a name for your app

  - Package명 선택시 기존 package의 충돌 피하기 위해 PyPI와 같은 리소스를 확인하기.

  - 배포 할 package만들 때 django-to module명을 앞에 추가하는 것이 유용.

    다른 사용자가 apps을 django를 고유로 식별 가능.

  - Application lables
    (즉, application packages의 점으로 구분 된 경로의 마지막 부분)
    - INSTALLED_APPS에서 고유해야 함.
    - Django contrib packages와 동일한 label을 사용하지 마십시오.
      (ex: auth, admin or messages)
</code></pre></div>
</li>
<li><p><strong>polls</strong> Dir을 <strong>django-polls</strong> Dir으로 이동.</p></li>
<li>
<p><strong>django-polls/README.rst</strong> 생성 후 아래 내용 작성:</p>
<div class="highlight"><pre><code class="language-rst" data-lang="rst">  =====
  Polls
  =====

  Polls is a simple Django app to conduct Web-based polls. For each
  question, visitors can choose between a fixed number of answers.

  Detailed documentation is in the "docs" directory.

  Quick start
  -----------

  1. Add "polls" to your INSTALLED_APPS setting like this::

      INSTALLED_APPS = [
          ...
          'polls',
      ]

  2. Include the polls URLconf in your project urls.py like this::

      url(r'^polls/', include('polls.urls')),

  3. Run `python manage.py migrate` to create the polls models.

  4. Start the development server and visit http://127.0.0.1:8000/admin/
     to create a poll (you'll need the Admin app enabled).

  5. Visit http://127.0.0.1:8000/polls/ to participate in the poll.
</code></pre></div>
</li>
<li>
<p>django-polls/LICENSE 생성</p>

<p>LICENSE를 선택하는 것은 이 자습서의 범위를 벗어나지 만,
  LICENSE 없이 공개적으로 release된 코드는 쓸모가 없다고 말하는 것으로 충분함.</p>

<p>Django와 많은 Django-compatible apps은 BSD LICENSE에 따라 배포됨.
  그러나, 당신은 자신의 라이센스를 자유롭게 선택할 수 있음.
  라이선스 선택이 누가 코드를 사용할 수 있는지에 영향을 미친다는 점에 유의.</p>
</li>
<li>
<p>django-polls/setup.py 생성</p>

<p>다음으로 우리는 app을 build하고 설치하는 방법에 대한 세부 사항을 제공.
  이 파일의 전체 설명은이 튜토리얼 범위를 벗어나지 만, setuptools 문서에는 좋은 설명이 있음.</p>

<p>django-polls/setup.py 작성 내용:</p>
<div class="highlight"><pre><code class="language-python" data-lang="python">  <span class="kn">import</span> <span class="nn">os</span>
  <span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">find_packages</span><span class="p">,</span> <span class="n">setup</span>

  <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">__file__</span><span class="p">),</span> <span class="s">'README.rst'</span><span class="p">))</span> <span class="k">as</span> <span class="n">readme</span><span class="p">:</span>
      <span class="n">README</span> <span class="o">=</span> <span class="n">readme</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

  <span class="c1"># allow setup.py to be run from any path
</span>  <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">__file__</span><span class="p">),</span> <span class="n">os</span><span class="o">.</span><span class="n">pardir</span><span class="p">)))</span>

  <span class="n">setup</span><span class="p">(</span>
      <span class="n">name</span><span class="o">=</span><span class="s">'django-polls'</span><span class="p">,</span>
      <span class="n">version</span><span class="o">=</span><span class="s">'0.1'</span><span class="p">,</span>
      <span class="n">packages</span><span class="o">=</span><span class="n">find_packages</span><span class="p">(),</span>
      <span class="n">include_package_data</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
      <span class="n">license</span><span class="o">=</span><span class="s">'BSD License'</span><span class="p">,</span>  <span class="c1"># example license
</span>      <span class="n">description</span><span class="o">=</span><span class="s">'A simple Django app to conduct Web-based polls.'</span><span class="p">,</span>
      <span class="n">long_description</span><span class="o">=</span><span class="n">README</span><span class="p">,</span>
      <span class="n">url</span><span class="o">=</span><span class="s">'https://www.example.com/'</span><span class="p">,</span>
      <span class="n">author</span><span class="o">=</span><span class="s">'Your Name'</span><span class="p">,</span>
      <span class="n">author_email</span><span class="o">=</span><span class="s">'yourname@example.com'</span><span class="p">,</span>
      <span class="n">classifiers</span><span class="o">=</span><span class="p">[</span>
          <span class="s">'Environment :: Web Environment'</span><span class="p">,</span>
          <span class="s">'Framework :: Django'</span><span class="p">,</span>
          <span class="s">'Framework :: Django :: X.Y'</span><span class="p">,</span>  <span class="c1"># replace "X.Y" as appropriate
</span>          <span class="s">'Intended Audience :: Developers'</span><span class="p">,</span>
          <span class="s">'License :: OSI Approved :: BSD License'</span><span class="p">,</span>  <span class="c1"># example license
</span>          <span class="s">'Operating System :: OS Independent'</span><span class="p">,</span>
          <span class="s">'Programming Language :: Python'</span><span class="p">,</span>
          <span class="c1"># Replace these appropriately if you are stuck on Python 2.
</span>          <span class="s">'Programming Language :: Python :: 3'</span><span class="p">,</span>
          <span class="s">'Programming Language :: Python :: 3.4'</span><span class="p">,</span>
          <span class="s">'Programming Language :: Python :: 3.5'</span><span class="p">,</span>
          <span class="s">'Topic :: Internet :: WWW/HTTP'</span><span class="p">,</span>
          <span class="s">'Topic :: Internet :: WWW/HTTP :: Dynamic Content'</span><span class="p">,</span>
      <span class="p">],</span>
  <span class="p">)</span>
</code></pre></div>
</li>
<li>
<p>기본적으로 python modules과 package만 패키지에 포함되어 있음.
추가 파일을 포함 시키려면 <strong>MANIFEST.in</strong> 파일을 만들어야 함.
이전 단계에서 언급 한 setuptools 문서에서 이 파일에 대해 더 자세히 설명함.
템플릿, README.rst 및 LICENSE 파일을 포함 시키려면 다음 내용으로 django-polls/MANIFEST.in 파일을 만듬.</p>
<div class="highlight"><pre><code class="language-" data-lang="">  # django-polls/MANIFEST.in

  include LICENSE
  include README.rst
  recursive-include polls/static *
  recursive-include polls/templates *
</code></pre></div>
</li>
<li>
<p>선택사항이지만 app에 자세한 문서를 포함하는 것이 좋음.
<strong>django-polls/docs</strong> 만들어 미래의 문서화.
<strong>django-polls/MANIFEST.in</strong> 에 아래 행을 추가:</p>
<div class="highlight"><pre><code class="language-" data-lang="">  recursive-include docs *
</code></pre></div>
<p>일부 파일을 추가하지 않으면 docs Dir이 패키지에 포함되지 않음.
  많은 Django apps은 readthedocs.org와 같은 사이트를 통해 oneline Doc를 제공함.</p>
</li>
<li>
<p>package build &amp; check</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">  <span class="nv">$ </span><span class="nb">cd </span>django-polls
  <span class="nv">$ </span>python setup.py sdist

  <span class="c"># ...</span>

  <span class="nv">$ </span><span class="nb">cd </span>dist
  <span class="nv">$ </span><span class="nb">ls

  </span>django-polls-0.1.tar.gz
</code></pre></div>
</li>
</ol>

<p>Packaging 자세한 내용: <a href="https://packaging.python.org/en/latest/distributing.html" rel="nofollow" target="_blank">Python Tutorial on Packaging and Distributing Projects</a></p>

<hr>

<h2 id="using-your-own-package">Using your own package</h2>

<p><strong>polls</strong> Dir를 프로젝트 밖으로 이동 했으므로 더 이상 작동하지 않습니다.
이제 new <strong>django-polls</strong> package를 설치하여이 문제를 해결할 것.</p>
<div class="highlight"><pre><code class="language-" data-lang="">* Installing as a user library

다음 단계는 django-polls를 사용자 라이브러리로 설치.
사용자 단위 설치는 관리자 액세스 권한이없는 시스템에서뿐만 아니라 패키지가
시스템 서비스 및 시스템의 다른 사용자에게 영향을 미치지 않도록하는 등
시스템 전체에 패키지를 설치하는 것보다 많은 장점이 있음.

사용자별 설치는 해당 사용자로 실행되는 시스템 도구의 동작에
영향을 미칠 수 있으므로 virtualenv는보다 강력한 솔루션입니다 (아래 참조).
</code></pre></div>
<ol>
<li>
<p>pip install (잘 안됨)</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">  pip <span class="nb">install</span> <span class="nt">--user</span> django-polls/dist/django-polls-0.1.tar.gz
</code></pre></div>
</li>
<li><p>설치가 잘되면 Django projects가 올바르게 다시 작동해야 함. (서버를 다시 실행)</p></li>
<li>
<p>uninstall package (pip)</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">  pip uninstall django-polls
</code></pre></div>
</li>
</ol>

<hr>

<h2 id="publishing-your-app">Publishing your app</h2>

<p>이제 django-polls를 패키지화 하고 테스트 했으므로 이제는 세계와 공유 할 준비됨!
이것이 단순한 예가 아니라면 다음과 같이 할 수 있습니다.</p>

<ul>
<li><p>Email 로 package 보내기</p></li>
<li><p>website 에 upload 하기</p></li>
<li><p>패키지를 Python Package Index(PyPI)와 같은 public repository에 게시.
packaging.python.org에는 이를 수행하는 데 <a href="https://packaging.python.org/distributing/#uploading-your-project-to-pypi" rel="nofollow" target="_blank">a good tutorial</a>가 있음.</p></li>
</ul>

<hr>

<h2 id="installing-python-packages-with-virtualenv">Installing Python packages with virtualenv</h2>

<p>앞에서 우리는 설문 조사 앱을 사용자 라이브러리로 설치했습니다. 여기에는 몇 가지 단점이 있습니다.</p>

<ul>
<li><p>사용자 라이브러리를 수정하면 시스템의 다른 Python 소프트웨어에 영향을 미칠 수 있습니다.</p></li>
<li><p>이 패키지의 여러 버전 (또는 같은 이름의 다른 버전)을 실행할 수 없습니다.</p></li>
</ul>

<p>일반적으로 이러한 상황은 장고 프로젝트를 여러 번 유지해야만 발생합니다. 그들이 할 때, 최선의 해결책은 virtualenv를 사용하는 것입니다. 이 도구를 사용하면 라이브러리 및 패키지 네임 스페이스의 자체 복사본이있는 여러 격리 된 Python 환경을 유지 관리 할 수 ​​있습니다.</p>

<h1 id="reference"><em>Reference</em></h1>

<h2 id="except">Except</h2>

<h3 id="pip-install-user-django-polls-dist-django-polls-0-1-tar-gz">pip install --user django-polls/dist/django-polls-0.1.tar.gz</h3>

<p>실행해도 안됨</p>

<h2 id="url">URL</h2>

<ul>
<li><p><a href="https://packaging.python.org/en/latest/distributing.html" rel="nofollow" target="_blank">https://packaging.python.org/en/latest/distributing.html</a></p></li>
<li><p><a href="https://packaging.python.org/distributing/#uploading-your-project-to-pypi" rel="nofollow" target="_blank">https://packaging.python.org/distributing/#uploading-your-project-to-pypi</a></p></li>
</ul>

</div>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/blog/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Portal2312&#39;s blog</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Portal2312&#39;s blog</li><li><a class="u-email" href="mailto:portal2312@gmail.com">portal2312@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/portal2312"><svg class="svg-icon"><use xlink:href="/blog/assets/minima-social-icons.svg#github"></use></svg> <span class="username">portal2312</span></a></li><li><a href="https://www.twitter.com/portal2312"><svg class="svg-icon"><use xlink:href="/blog/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">portal2312</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Welcome to my blog.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
