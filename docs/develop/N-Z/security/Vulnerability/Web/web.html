<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>WEB | Portal2312&#39;s blog</title>
<meta name="generator" content="Jekyll v3.8.6" />
<meta property="og:title" content="WEB" />
<meta name="author" content="mkkim" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="HTTP Verb" />
<meta property="og:description" content="HTTP Verb" />
<link rel="canonical" href="/blog/docs/develop/N-Z/security/Vulnerability/Web/web.html" />
<meta property="og:url" content="/blog/docs/develop/N-Z/security/Vulnerability/Web/web.html" />
<meta property="og:site_name" content="Portal2312&#39;s blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-12-02T16:38:51+09:00" />
<script type="application/ld+json">
{"description":"HTTP Verb","headline":"WEB","dateModified":"2019-12-02T16:38:51+09:00","datePublished":"2019-12-02T16:38:51+09:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"/blog/docs/develop/N-Z/security/Vulnerability/Web/web.html"},"url":"/blog/docs/develop/N-Z/security/Vulnerability/Web/web.html","author":{"@type":"Person","name":"mkkim"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href='/blog/assets/main.css'><link type="application/atom+xml" rel="alternate" href="/blog/feed.xml" title="Portal2312's blog" /><script>
if(!(window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1")) {
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-113063601-1', 'auto');
  ga('send', 'pageview');
}
</script>
  
<script src='/blog/dist/js/common.bundle.js'></script>
</head>
<body><header class="site-header" role="banner">
  <div class="wrapper">
    <a class="site-title" rel="author" href="/blog/">Portal2312&#39;s blog</a>
    <nav class="site-nav">
    <input type="checkbox" id="nav-trigger" class="nav-trigger" />
    <label for="nav-trigger">
      <span class="menu-icon">
        <svg viewBox="0 0 18 15" width="18px" height="15px">
          <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
        </svg>
      </span>
    </label>

    <div class="trigger"><a class="page-link" href="/blog/about.html">
            About
          </a><a class="page-link" href="/blog/posts.html">
            Posts
          </a><a class="page-link" href="/blog/history.html">
            History
          </a><a class="page-link" href="/blog/docs/index.html">
            Docs
          </a></div>
  </nav>
  </div>
  <div class="scroll-indicator-container">
  <div class="scroll-indicator-bar" id="scrollIndicatorBar"></div>
</div>

</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <h1>WEB</h1>

  <div>
    <h2>Table of contents</h2>
    <ul class="section-nav">
<li class="toc-entry toc-h2"><a href="#http-verb">HTTP Verb</a>
<ul>
<li class="toc-entry toc-h3"><a href="#some-points-to-remember">Some Points to remember</a></li>
<li class="toc-entry toc-h3"><a href="#reference">Reference</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#content-security-policy">Content-Security-Policy</a>
<ul>
<li class="toc-entry toc-h3"><a href="#reference">Reference</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#x-xss-protection">X-XSS-Protection</a>
<ul>
<li class="toc-entry toc-h3"><a href="#reference">Reference</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#x-content-type-options">X-Content-Type-Options</a>
<ul>
<li class="toc-entry toc-h3"><a href="#reference">Reference</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#http-strict-transport-security">HTTP Strict-Transport-Security</a>
<ul>
<li class="toc-entry toc-h3"><a href="#reference">Reference</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#part-61c86b8f4e5a09a7">본문 매개변수가 조회에서 허용됨</a></li>
<li class="toc-entry toc-h2"><a href="#python-file-download">python file download</a></li>
<li class="toc-entry toc-h2"><a href="#nginx-error-page">NGINX error Page</a>
<ul>
<li class="toc-entry toc-h3"><a href="#reference">Reference</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#password">Password 복잡도</a></li>
<li class="toc-entry toc-h2"><a href="#browser-exploit-against-ssl-tls-beast">Browser Exploit Against SSL/TLS(BEAST)</a>
<ul>
<li class="toc-entry toc-h3"><a href="#part-42e3e6859ab0afd6">수정 권장 사항</a></li>
<li class="toc-entry toc-h3"><a href="#web-server">Web Server</a>
<ul>
<li class="toc-entry toc-h4"><a href="#nginx">Nginx</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#reference">Reference</a></li>
</ul>
</li>
</ul><h2 id="http-verb">
<a class="anchor" href="#http-verb" aria-hidden="true"><span class="octicon octicon-link"></span></a>HTTP Verb</h2>

<p>Hypertext transfer protocol (HTTP)는 웹 서버에서 여러 가지 작업을 수행할 수 있게 하는 여러 가지 방법(method, verb)을 제공한다. 이러한 verb들은 개발자들의 HTTP 어플리케이션의 개발 및 디버깅에 사용된다. 그러나 웹 서버가 취약하게 설정되어 있다면 이들은 악의적 의도로 사용될 수 있다.</p>

<p>GET과 POST는 웹 서버에 있는 정보에 접근(access)하기 위해 가장 일반적으로 쓰이는 HTTP verb이다. 그 외에도 HTTP는 잘 알려지지 않은 다양한 verb를 제공하는데, 그 예는 아래와 같다.</p>

<ul>
<li>HEAD</li>
<li>GET</li>
<li>POST</li>
<li>PUT</li>
<li>DELETE</li>
<li>TRACE</li>
<li>OPTIONS</li>
<li>CONNECT</li>
</ul>

<p>이들 중 일부는 웹 서버의 파일을 공격자가 조작할 수 있게 함으로써, 웹 어플리케이션에 큰 보안적 위험을 초래할 수 있다. 만약 당신이 서버의 관리자라면, 다음과 같은 verb들은 반드시 막아둬야(disable) 한다.</p>

<ul>
<li><p>PUT : 클라이언트가 웹 서버에 새로운 파일을 업로드 할 수 있게 한다. 공격자가 특정 명령어가 입력된 ASP, PHP 파일등을 업로드하거나, 당신의 서버를 파일 저장소로 이용할 수 있다.</p></li>
<li><p>DELETE : 웹 서버의 파일을 삭제할 수 있게 한다. 공격자가 당신의 서버를 손상시킬 수 있다.</p></li>
<li><p>CONNECT : 클라이언트가 당신의 서버를 프록시(proxy)로 사용할 수 있다.</p></li>
<li><p>TRACE : 이는 단순히 클라이언트가 보낸 문자열(string)을 그대로 반환(echoes back)하는 것이며, 일반적으로 개발자들이 디버깅을 위해 사용한다. 그러나 Jeremiah Grossman이 발견한 Cross Site Tracing(XST) 등을 이용하면 공격 목적으로 사용될 수 있다.</p></li>
</ul>

<p>만약 어플리케이션이 위의 verb 중 하나라도 사용해야 한다면 (대표적으로 REST 웹 서비스는 대부분 PUT 또는 DELETE를 필요로 한다), 안전한 환경에서 신뢰할 수 있는 유저에게만 사용을 제한하는 것이 굉장히 중요하다.</p>

<h3 id="some-points-to-remember">
<a class="anchor" href="#some-points-to-remember" aria-hidden="true"><span class="octicon octicon-link"></span></a>Some Points to remember</h3>

<ul>
<li>언제나 deny all option을 사용하라.</li>
<li>HEAD 리퀘스트를 완전히 차단하도록 웹 어플리케이션 서버를 설정하라.</li>
</ul>

<h3 id="reference">
<a class="anchor" href="#reference" aria-hidden="true"><span class="octicon octicon-link"></span></a>Reference</h3>

<p><a href="http://sihadan.tistory.com/101">http://sihadan.tistory.com/101</a></p>

<hr>

<h2 id="content-security-policy">
<a class="anchor" href="#content-security-policy" aria-hidden="true"><span class="octicon octicon-link"></span></a>Content-Security-Policy</h2>

<p>웹의 보안 모델은 동일 출처 정책에 근간을 두고 있습니다. <a href="https://mybank.com%EC%9D%98">https://mybank.com의</a> 코드는 <a href="https://mybank.com%EC%9D%98">https://mybank.com의</a> 데이터에만 액세스 권한이 있으며 <a href="https://evil.example.com%EC%97%90%EB%8A%94">https://evil.example.com에는</a> 액세스 권한이 없습니다. 각 출처는 나머지 웹과 격리되며, 빌드하여 재생할 수 있는 안전한 샌드박스를 개발자에게 제공합니다. 이론상 완벽할 정도로 훌륭합니다. 실제로는 공격자가 영리하게 그 시스템을 파괴했습니다.</p>

<p>예를 들어, 교차 사이트 스크립팅(XSS) 공격은 사이트를 속여 악성 코드를 의도된 콘텐츠와 함께 전달하게 하여 동일 출처 정책을 우회합니다. 이는 브라우저가 페이지의 모든 코드를 해당 페이지의 합법적인 보안 출처의 일부로 신뢰하므로 심각한 문제를 낳습니다. XSS Cheat Sheet는 오래된 방법이지만 공격자가 악성 코드를 삽입하여 해당 신뢰를 위반하는 데 사용할 수 있는 방법의 대표적인 예입니다. 공격자가 어떤 코드를 조금이라도 삽입하면 거의 게임은 끝납니다. 사용자 세션 데이터가 위험에 노출되고 비밀로 유지되어야 할 정보가 나쁜 사람에게 넘어갑니다. 그런 상황을 가능한 한 예방하길 원하는 것은 명백합니다.</p>

<p>이 개요는 최신 브라우저에서 XSS 공격의 위험과 영향을 현저히 줄일 수 있는 방어책인 콘텐츠 보안 정책(CSP)에 중점을 두고 있습니다.</p>
<div class="highlight"><pre><code class="language-" data-lang="">add_header Content-Security-Policy "default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://ssl.google-analytics.com https://assets.zendesk.com https://connect.facebook.net; img-src 'self' https://ssl.google-analytics.com https://s-static.ak.facebook.com https://assets.zendesk.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://assets.zendesk.com; font-src 'self' https://themes.googleusercontent.com; frame-src https://assets.zendesk.com https://www.facebook.com https://s-static.ak.facebook.com https://tautt.zendesk.com; object-src 'none'";
</code></pre></div>
<h3 id="reference">
<a class="anchor" href="#reference" aria-hidden="true"><span class="octicon octicon-link"></span></a>Reference</h3>

<p><a href="https://gist.github.com/plentz/6737338">https://gist.github.com/plentz/6737338</a></p>

<p><a href="https://developer.mozilla.org/ko/docs/Security/CSP/Using_Content_Security_Policy">https://developer.mozilla.org/ko/docs/Security/CSP/Using_Content_Security_Policy</a></p>

<p><a href="https://developers.google.com/web/fundamentals/security/csp/?hl=ko">https://developers.google.com/web/fundamentals/security/csp/?hl=ko</a></p>

<hr>

<h2 id="x-xss-protection">
<a class="anchor" href="#x-xss-protection" aria-hidden="true"><span class="octicon octicon-link"></span></a>X-XSS-Protection</h2>

<p>HTTP X-XSS-Protection 응답 헤더</p>

<p>XSS (반사 된 교차 사이트 스크립팅) 공격을 감지 할 때 페이지로드를 중지시키는 Internet Explorer, Chrome 및 Safari의 기능입니다.
최신 브라우저에서는 사이트가 인라인 JavaScript('안전하지 않은 인라인') 사용을 금지하는 강력한 Content-Security-Policy를 구현할 때 이러한 보호 기능이 거의 필요하지 않지만 이전에는 아직 사용하지 않는 오래된 웹 브라우저 사용자를 보호 할 수 있습니다 CSP를 지원하십시오.</p>

<p>적용:</p>

<ul>
<li><p>XSS 필터 설정이 필요한 페이지에서 응답을 보낼 때 값을 지정하여 반환(단, 개발과정이나 조치 과정에서 일일이 설정해야 하는 번거로움이 있음)</p></li>
<li>
<p>웹 서버의 환경설정에서 응답시 해더에 자동으로 추가하여 반환하도록 하기 (전체 적용).</p>

<ul>
<li>nginx.conf</li>
</ul>

<p><a href="https://www.nginx.com/blog/http-strict-transport-security-hsts-and-nginx/">nginx 설정하기</a>, add_header 상속 주의하기</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">add_header X-XSS-Protection <span class="s2">"1; mode=block"</span><span class="p">;</span>
</code></pre></div>
</li>
</ul>

<h3 id="reference">
<a class="anchor" href="#reference" aria-hidden="true"><span class="octicon octicon-link"></span></a>Reference</h3>

<p><a href="http://blog.kinesis.kr/137">http://blog.kinesis.kr/137</a></p>

<p><a href="http://nisam.tistory.com/8">http://nisam.tistory.com/8</a></p>

<p><a href="https://gist.github.com/plentz/6737338">https://gist.github.com/plentz/6737338</a></p>

<hr>

<h2 id="x-content-type-options">
<a class="anchor" href="#x-content-type-options" aria-hidden="true"><span class="octicon octicon-link"></span></a>X-Content-Type-Options</h2>

<p>script 및 styleSheet 요소는 서버가 "X-Content-Type-Options: nosniff" 응답 헤더를 보내는 경우 잘못된 MIME 형식이 포함된 응답을 거부합니다.
이는 MIME 형식 혼동을 기반으로 하는 공격을 차단하기 위한 보안 기능입니다.</p>

<p>이러한 변경 사항은 서버가 응답에서 "X-Content-Type-Options: nosniff" 헤더를 전송할 때 브라우저의 동작에 영향을 줍니다.</p>

<p>styleSheet 참조가 수신한 응답에 "nosniff" 지시문이 포함된 경우, Windows Internet Explorer는 MIME 형식이 "text/css"와 일치할 때까지 "stylesheet" 파일을 로드하지 않습니다.</p>

<p>script 참조로 검색한 응답에 "nosniff" 지시문이 포함된 경우, Internet Explorer는 MIME 형식이 다음 값 중 하나와 일치할 때까지 "script" 파일을 로드하지 않습니다.</p>

<p>적용:</p>

<ul>
<li><p>XSS 필터 설정이 필요한 페이지에서 응답을 보낼 때 값을 지정하여 반환(단, 개발과정이나 조치 과정에서 일일이 설정해야 하는 번거로움이 있음)</p></li>
<li>
<p>웹 서버의 환경설정에서 응답시 해더에 자동으로 추가하여 반환하도록 하기 (전체 적용).</p>

<ul>
<li>nginx.conf</li>
</ul>

<p><a href="https://www.nginx.com/blog/http-strict-transport-security-hsts-and-nginx/">nginx 설정하기</a>, add_header 상속 주의하기</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">add_header X-Content-Type-Options nosniff<span class="p">;</span>
</code></pre></div>
</li>
</ul>

<h3 id="reference">
<a class="anchor" href="#reference" aria-hidden="true"><span class="octicon octicon-link"></span></a>Reference</h3>

<p><a href="https://gist.github.com/plentz/6737338">https://gist.github.com/plentz/6737338</a></p>

<hr>

<h2 id="http-strict-transport-security">
<a class="anchor" href="#http-strict-transport-security" aria-hidden="true"><span class="octicon octicon-link"></span></a>HTTP Strict-Transport-Security</h2>

<p>위협 분류: 정보 유출</p>

<p>원인: 안전하지 않은 웹 애플리케이션 프로그래밍 또는 환경 설정입니다.</p>

<p>보안 위험:</p>

<p>사용자 이름, 비밀번호, 머신 이름 및/또는 민감한 파일 위치 등과 같이 웹 애플리케이션에 대한 민감한 정보를 모으는 것이 가능합니다.</p>

<p>속기 쉬운 사용자를 설득해서 사용자 이름, 비밀번호, 신용카드 번호, 주민등록 번호와 같은 민감한 정보를 제공하도록 하는 것이 가능합니다.</p>

<p>참조:</p>

<p><a href="https://www.owasp.org/index.php/HTTP_Strict_Transport_Security">OWASP "HTTP Strict Transport Security"</a></p>

<p><a href="http://tools.ietf.org/html/rfc6797">HSTS 스펙</a></p>

<p>기술적 설명:</p>

<p>HSTS(HTTP Strict Transport Security)는 보안(HTTPS) 웹 사이트가 비보안 HTTP로 다운그레이드되지 않도록 보호하는 메커니즘입니다.</p>

<p>이 메커니즘을 통해 웹 서버는 해당 클라이언트(웹 브라우저 또는 기타 사용자 에이전트)에 서버와 상호작용할 때 보안 HTTPS 연결을 사용하고 비보안 HTTP 프토토콜을 사용하지 않도록 지시할 수 있습니다.</p>

<p>HTTP Strict Transport Security 정책은 "Strict-Transport-Security"라는 응답 헤더를 사용하여 서버에 의해 해당 클라이언트로 전달됩니다.</p>

<p>이 헤더의 값은 클라이언트가 HTTPS로만 서버에 액세스해야 하는 기간입니다.</p>

<p>기타 헤더 속성에는 "includeSubDomains" 및 "preload"가 포함됩니다</p>

<p>사이트 전체를 HTTPS 연결을 사용하고 있는 경우.
"이 사이트는 오직 HTTPS 연결만 지원합니다" 라고 알릴 수 있습니다.
이렇게 알려진 경우 브라우저가 해당 설정을 기억하여 http로 접속시 스킵하고 https 로 이동할 수 있으며, http/https 양쪽이 세션을 공유하고 있을때 취약점도 커버 할 수 있습니다.
그 알림을 HTTP Strict Transport Security (이하 HSTS) 라고 부릅니다.</p>

<p>적용:</p>

<ul>
<li><p>XSS 필터 설정이 필요한 페이지에서 응답을 보낼 때 값을 지정하여 반환(단, 개발과정이나 조치 과정에서 일일이 설정해야 하는 번거로움이 있음)</p></li>
<li>
<p>웹 서버의 환경설정에서 응답시 해더에 자동으로 추가하여 반환하도록 하기 (전체 적용).</p>

<ul>
<li>nginx.conf</li>
</ul>

<p><a href="https://www.nginx.com/blog/http-strict-transport-security-hsts-and-nginx/">nginx 설정하기</a>, add_header 상속 주의하기</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">...<span class="o">(</span>생략<span class="o">)</span>...

server <span class="o">{</span>
  listen 80 default_server<span class="p">;</span>
  ...<span class="o">(</span>생략<span class="o">)</span>...
<span class="o">}</span>

server <span class="o">{</span>
  listen 443 ssl http2<span class="p">;</span>
  ...<span class="o">(</span>생략<span class="o">)</span>...
  add_header Strict-Transport-Security <span class="s2">"max-age=31536000; includeSubDomains; preload"</span><span class="p">;</span>
  ...<span class="o">(</span>생략<span class="o">)</span>...
<span class="o">}</span>
</code></pre></div>
</li>
</ul>

<h3 id="reference">
<a class="anchor" href="#reference" aria-hidden="true"><span class="octicon octicon-link"></span></a>Reference</h3>

<p><a href="https://gist.github.com/plentz/6737338">https://gist.github.com/plentz/6737338</a></p>

<p><a href="https://gs.saro.me/#!m=elec&amp;jn=712">https://gs.saro.me/#!m=elec&amp;jn=712</a></p>

<hr>

<h2 id="part-61c86b8f4e5a09a7">
<a class="anchor" href="#part-61c86b8f4e5a09a7" aria-hidden="true"><span class="octicon octicon-link"></span></a>본문 매개변수가 조회에서 허용됨</h2>

<p>source 중 정보는 전부 은닉(backend 처리등)하기</p>

<hr>

<h2 id="python-file-download">
<a class="anchor" href="#python-file-download" aria-hidden="true"><span class="octicon octicon-link"></span></a>python file download</h2>

<p>URL 호출시 <code>/download&amp;file_name=/etc/passwd</code> 하면 download 되는 현상</p>

<p>재연:</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">os</span>

<span class="n">file_name</span> <span class="o">=</span> <span class="s">'/etc/passwd'</span>  <span class="c1"># ../../etc/passwd 등
</span><span class="n">file_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">'/home/mkkim/download'</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
<span class="k">print</span> <span class="n">file_name</span>
<span class="c1"># /etc/passwd 가 출력
</span></code></pre></div>
<p>수정:</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">if</span> <span class="n">file_name</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">'/'</span><span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
    <span class="k">return</span> <span class="bp">False</span>
</code></pre></div>
<hr>

<h2 id="nginx-error-page">
<a class="anchor" href="#nginx-error-page" aria-hidden="true"><span class="octicon octicon-link"></span></a>NGINX error Page</h2>

<p>Status 404, 403 등 Error 시 nginx 에서 기본 error.html 말고 Page 의 처음으로 이동하기</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">...<span class="o">(</span>생략<span class="o">)</span>...
<span class="o">{</span>
    ...<span class="o">(</span>생략<span class="o">)</span>...

    error_page  404 403 500 502 503 504 /50x.html<span class="p">;</span>
    location <span class="o">=</span> /50x.html <span class="o">{</span>
        rewrite .<span class="k">*</span> / permanent<span class="p">;</span>
        <span class="c"># root   /usr/share/nginx/html;</span>
    <span class="o">}</span>

    fastcgi_intercept_errors on<span class="p">;</span>

    ...<span class="o">(</span>생략<span class="o">)</span>...
<span class="o">}</span>
</code></pre></div>
<h3 id="reference">
<a class="anchor" href="#reference" aria-hidden="true"><span class="octicon octicon-link"></span></a>Reference</h3>

<p><a href="https://www.phpschool.com/gnuboard4/bbs/board.php?bo_table=qna_install&amp;wr_id=114871">https://www.phpschool.com/gnuboard4/bbs/board.php?bo_table=qna_install&amp;wr_id=114871</a></p>

<hr>

<h2 id="password">
<a class="anchor" href="#password" aria-hidden="true"><span class="octicon octicon-link"></span></a>Password 복잡도</h2>

<p>Source level 에서 수정하기 (생략)</p>

<hr>

<h2 id="browser-exploit-against-ssl-tls-beast">
<a class="anchor" href="#browser-exploit-against-ssl-tls-beast" aria-hidden="true"><span class="octicon octicon-link"></span></a>Browser Exploit Against SSL/TLS(BEAST)</h2>

<p>보안 위험:</p>

<p>합법적인 사용자로 위장하는 데 사용될 수 있는 고객 세션 및 쿠키를 빼내거나 조작하는 것이 가능하여 해커가 사용자 레코드를 보거나 변경할 수 있으며 해당 사용자처럼 트랜잭션을 수행할 수 있습니다.</p>

<p><a href="https://blog.qualys.com/ssllabs/2013/09/10/is-beast-still-a-threat">Is BEAST Still a Threat?</a></p>

<p><a href="http://securitystreetknowledge.com/?p=882">SSL Beast - SSL Assessments and How to Fix</a></p>

<p>기술적 설명:</p>

<p>TLS 1.0 및 이전 버전에서는 블록 암호 암호화의 초기화 벡터를 예측할 수 있습니다. 중간자 공격자는 이를 통해 암호 화되는 일반 텍스트를 추정할 수 있습니다. 공격자가 IV를 예측하고 암호화된 데이터를 점검하고 암호화할 텍스트를 삽입할 수 있는 경우, 공격자는 암호화된 민 감한 일반 텍스트를 추정하고 추정이 올바른지 여부를 확인할 수 있습니다. 기술적으로는 공격자가 암호화된 데이터를 복호화할 수 없지만 암호화된 추정을 충분히 점검하면 결국 민감한 정보의 값을 알아낼 수 있습니다.</p>

<p>BEAST(Browser Exploit Against SSL/TLS)는 SSL 3.0의 취약점을 공격한다. 이 취약점은 엔드 유저 브라우저에서 HTTPS의 쿠키들을 해독하고 효과적으로 타깃의 세션을 하이제킹 할 수 있는 취약점이다.</p>

<p>TIM은 시큐리티 전문가들로 구성된 테스크 포스를 구성하고 SSL과 CA 시스템에서 수정돼야 할 이슈들을 리뷰하고 있다. 특히 CA(인증기관, Certificate Authorities)들은 지난 몇 년간 해커들이 사기 인증서를 발급하도록 허용했고 해킹공격으로 인증기관 가운데 하나인 DigiNotar는 파산했다.</p>

<p>공격에 대한 취약점은 TLS 프로토콜 버전 1.1에서 수정됐다. 그러나 많은 서버들이 오래된 버전이나 취약한 프로토콜인 SSL 3.0과 같은 버전을 사용하고 있다. 이러한 서버들은 SSL 다운그레이드 공격에 취약하다. 이 공격은 클라이언트가 시큐어한 버전을 지원한다 할 지라도 SSL/TLS의 취약한 버전을 사용하도록 속일 수 있다.</p>

<h3 id="part-42e3e6859ab0afd6">
<a class="anchor" href="#part-42e3e6859ab0afd6" aria-hidden="true"><span class="octicon octicon-link"></span></a>수정 권장 사항</h3>

<p>CBC를 사용하는 SSLv3/TLS1.0 암호 스위트 지원을 제거하십시오.</p>

<p>자세한 정보를 보려면 <a href="http://disablessl3.com/">http://disablessl3.com/</a> 링크의 내용을 참조하십시오.</p>

<h3 id="web-server">
<a class="anchor" href="#web-server" aria-hidden="true"><span class="octicon octicon-link"></span></a>Web Server</h3>

<h4 id="nginx">
<a class="anchor" href="#nginx" aria-hidden="true"><span class="octicon octicon-link"></span></a>Nginx</h4>

<p><code>ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</code> 추가하기</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">http <span class="o">{</span>
    ...<span class="o">(</span>생략<span class="o">)</span>...

    server <span class="o">{</span>
        ...<span class="o">(</span>생략<span class="o">)</span>...

        listen 443<span class="p">;</span>

        ...<span class="o">(</span>생략<span class="o">)</span>...
        ssl                 on<span class="p">;</span>
        ssl_certificate     /home/my/etc/sslkey/server.crt<span class="p">;</span>
        ssl_certificate_key /home/my/etc/sslkey/private.key<span class="p">;</span>
        ssl_session_timeout  20m<span class="p">;</span>

        ssl_protocols TLSv1 TLSv1.1 TLSv1.2<span class="p">;</span>

        ...<span class="o">(</span>생략<span class="o">)</span>...
    <span class="o">}</span>
    ...<span class="o">(</span>생략<span class="o">)</span>...
<span class="o">}</span>
</code></pre></div>
<h3 id="reference">
<a class="anchor" href="#reference" aria-hidden="true"><span class="octicon octicon-link"></span></a>Reference</h3>

  </div>

<div>
  <h2 id="http-verb">HTTP Verb</h2>

<p>Hypertext transfer protocol (HTTP)는 웹 서버에서 여러 가지 작업을 수행할 수 있게 하는 여러 가지 방법(method, verb)을 제공한다. 이러한 verb들은 개발자들의 HTTP 어플리케이션의 개발 및 디버깅에 사용된다. 그러나 웹 서버가 취약하게 설정되어 있다면 이들은 악의적 의도로 사용될 수 있다.</p>

<p>GET과 POST는 웹 서버에 있는 정보에 접근(access)하기 위해 가장 일반적으로 쓰이는 HTTP verb이다. 그 외에도 HTTP는 잘 알려지지 않은 다양한 verb를 제공하는데, 그 예는 아래와 같다.</p>

<ul>
<li>HEAD</li>
<li>GET</li>
<li>POST</li>
<li>PUT</li>
<li>DELETE</li>
<li>TRACE</li>
<li>OPTIONS</li>
<li>CONNECT</li>
</ul>

<p>이들 중 일부는 웹 서버의 파일을 공격자가 조작할 수 있게 함으로써, 웹 어플리케이션에 큰 보안적 위험을 초래할 수 있다. 만약 당신이 서버의 관리자라면, 다음과 같은 verb들은 반드시 막아둬야(disable) 한다.</p>

<ul>
<li><p>PUT : 클라이언트가 웹 서버에 새로운 파일을 업로드 할 수 있게 한다. 공격자가 특정 명령어가 입력된 ASP, PHP 파일등을 업로드하거나, 당신의 서버를 파일 저장소로 이용할 수 있다.</p></li>
<li><p>DELETE : 웹 서버의 파일을 삭제할 수 있게 한다. 공격자가 당신의 서버를 손상시킬 수 있다.</p></li>
<li><p>CONNECT : 클라이언트가 당신의 서버를 프록시(proxy)로 사용할 수 있다.</p></li>
<li><p>TRACE : 이는 단순히 클라이언트가 보낸 문자열(string)을 그대로 반환(echoes back)하는 것이며, 일반적으로 개발자들이 디버깅을 위해 사용한다. 그러나 Jeremiah Grossman이 발견한 Cross Site Tracing(XST) 등을 이용하면 공격 목적으로 사용될 수 있다.</p></li>
</ul>

<p>만약 어플리케이션이 위의 verb 중 하나라도 사용해야 한다면 (대표적으로 REST 웹 서비스는 대부분 PUT 또는 DELETE를 필요로 한다), 안전한 환경에서 신뢰할 수 있는 유저에게만 사용을 제한하는 것이 굉장히 중요하다.</p>

<h3 id="some-points-to-remember">Some Points to remember</h3>

<ul>
<li>언제나 deny all option을 사용하라.</li>
<li>HEAD 리퀘스트를 완전히 차단하도록 웹 어플리케이션 서버를 설정하라.</li>
</ul>

<h3 id="reference">Reference</h3>

<p><a href="http://sihadan.tistory.com/101" rel="nofollow" target="_blank">http://sihadan.tistory.com/101</a></p>

<hr>

<h2 id="content-security-policy">Content-Security-Policy</h2>

<p>웹의 보안 모델은 동일 출처 정책에 근간을 두고 있습니다. <a href="https://mybank.com%EC%9D%98" rel="nofollow" target="_blank">https://mybank.com의</a> 코드는 <a href="https://mybank.com%EC%9D%98" rel="nofollow" target="_blank">https://mybank.com의</a> 데이터에만 액세스 권한이 있으며 <a href="https://evil.example.com%EC%97%90%EB%8A%94" rel="nofollow" target="_blank">https://evil.example.com에는</a> 액세스 권한이 없습니다. 각 출처는 나머지 웹과 격리되며, 빌드하여 재생할 수 있는 안전한 샌드박스를 개발자에게 제공합니다. 이론상 완벽할 정도로 훌륭합니다. 실제로는 공격자가 영리하게 그 시스템을 파괴했습니다.</p>

<p>예를 들어, 교차 사이트 스크립팅(XSS) 공격은 사이트를 속여 악성 코드를 의도된 콘텐츠와 함께 전달하게 하여 동일 출처 정책을 우회합니다. 이는 브라우저가 페이지의 모든 코드를 해당 페이지의 합법적인 보안 출처의 일부로 신뢰하므로 심각한 문제를 낳습니다. XSS Cheat Sheet는 오래된 방법이지만 공격자가 악성 코드를 삽입하여 해당 신뢰를 위반하는 데 사용할 수 있는 방법의 대표적인 예입니다. 공격자가 어떤 코드를 조금이라도 삽입하면 거의 게임은 끝납니다. 사용자 세션 데이터가 위험에 노출되고 비밀로 유지되어야 할 정보가 나쁜 사람에게 넘어갑니다. 그런 상황을 가능한 한 예방하길 원하는 것은 명백합니다.</p>

<p>이 개요는 최신 브라우저에서 XSS 공격의 위험과 영향을 현저히 줄일 수 있는 방어책인 콘텐츠 보안 정책(CSP)에 중점을 두고 있습니다.</p>
<div class="highlight"><pre><code class="language-" data-lang="">add_header Content-Security-Policy "default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://ssl.google-analytics.com https://assets.zendesk.com https://connect.facebook.net; img-src 'self' https://ssl.google-analytics.com https://s-static.ak.facebook.com https://assets.zendesk.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://assets.zendesk.com; font-src 'self' https://themes.googleusercontent.com; frame-src https://assets.zendesk.com https://www.facebook.com https://s-static.ak.facebook.com https://tautt.zendesk.com; object-src 'none'";
</code></pre></div>
<h3 id="reference">Reference</h3>

<p><a href="https://gist.github.com/plentz/6737338" rel="nofollow" target="_blank">https://gist.github.com/plentz/6737338</a></p>

<p><a href="https://developer.mozilla.org/ko/docs/Security/CSP/Using_Content_Security_Policy" rel="nofollow" target="_blank">https://developer.mozilla.org/ko/docs/Security/CSP/Using_Content_Security_Policy</a></p>

<p><a href="https://developers.google.com/web/fundamentals/security/csp/?hl=ko" rel="nofollow" target="_blank">https://developers.google.com/web/fundamentals/security/csp/?hl=ko</a></p>

<hr>

<h2 id="x-xss-protection">X-XSS-Protection</h2>

<p>HTTP X-XSS-Protection 응답 헤더</p>

<p>XSS (반사 된 교차 사이트 스크립팅) 공격을 감지 할 때 페이지로드를 중지시키는 Internet Explorer, Chrome 및 Safari의 기능입니다.
최신 브라우저에서는 사이트가 인라인 JavaScript('안전하지 않은 인라인') 사용을 금지하는 강력한 Content-Security-Policy를 구현할 때 이러한 보호 기능이 거의 필요하지 않지만 이전에는 아직 사용하지 않는 오래된 웹 브라우저 사용자를 보호 할 수 있습니다 CSP를 지원하십시오.</p>

<p>적용:</p>

<ul>
<li><p>XSS 필터 설정이 필요한 페이지에서 응답을 보낼 때 값을 지정하여 반환(단, 개발과정이나 조치 과정에서 일일이 설정해야 하는 번거로움이 있음)</p></li>
<li>
<p>웹 서버의 환경설정에서 응답시 해더에 자동으로 추가하여 반환하도록 하기 (전체 적용).</p>

<ul>
<li>nginx.conf</li>
</ul>

<p><a href="https://www.nginx.com/blog/http-strict-transport-security-hsts-and-nginx/" rel="nofollow" target="_blank">nginx 설정하기</a>, add_header 상속 주의하기</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">add_header X-XSS-Protection <span class="s2">"1; mode=block"</span><span class="p">;</span>
</code></pre></div>
</li>
</ul>

<h3 id="reference">Reference</h3>

<p><a href="http://blog.kinesis.kr/137" rel="nofollow" target="_blank">http://blog.kinesis.kr/137</a></p>

<p><a href="http://nisam.tistory.com/8" rel="nofollow" target="_blank">http://nisam.tistory.com/8</a></p>

<p><a href="https://gist.github.com/plentz/6737338" rel="nofollow" target="_blank">https://gist.github.com/plentz/6737338</a></p>

<hr>

<h2 id="x-content-type-options">X-Content-Type-Options</h2>

<p>script 및 styleSheet 요소는 서버가 "X-Content-Type-Options: nosniff" 응답 헤더를 보내는 경우 잘못된 MIME 형식이 포함된 응답을 거부합니다.
이는 MIME 형식 혼동을 기반으로 하는 공격을 차단하기 위한 보안 기능입니다.</p>

<p>이러한 변경 사항은 서버가 응답에서 "X-Content-Type-Options: nosniff" 헤더를 전송할 때 브라우저의 동작에 영향을 줍니다.</p>

<p>styleSheet 참조가 수신한 응답에 "nosniff" 지시문이 포함된 경우, Windows Internet Explorer는 MIME 형식이 "text/css"와 일치할 때까지 "stylesheet" 파일을 로드하지 않습니다.</p>

<p>script 참조로 검색한 응답에 "nosniff" 지시문이 포함된 경우, Internet Explorer는 MIME 형식이 다음 값 중 하나와 일치할 때까지 "script" 파일을 로드하지 않습니다.</p>

<p>적용:</p>

<ul>
<li><p>XSS 필터 설정이 필요한 페이지에서 응답을 보낼 때 값을 지정하여 반환(단, 개발과정이나 조치 과정에서 일일이 설정해야 하는 번거로움이 있음)</p></li>
<li>
<p>웹 서버의 환경설정에서 응답시 해더에 자동으로 추가하여 반환하도록 하기 (전체 적용).</p>

<ul>
<li>nginx.conf</li>
</ul>

<p><a href="https://www.nginx.com/blog/http-strict-transport-security-hsts-and-nginx/" rel="nofollow" target="_blank">nginx 설정하기</a>, add_header 상속 주의하기</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">add_header X-Content-Type-Options nosniff<span class="p">;</span>
</code></pre></div>
</li>
</ul>

<h3 id="reference">Reference</h3>

<p><a href="https://gist.github.com/plentz/6737338" rel="nofollow" target="_blank">https://gist.github.com/plentz/6737338</a></p>

<hr>

<h2 id="http-strict-transport-security">HTTP Strict-Transport-Security</h2>

<p>위협 분류: 정보 유출</p>

<p>원인: 안전하지 않은 웹 애플리케이션 프로그래밍 또는 환경 설정입니다.</p>

<p>보안 위험:</p>

<p>사용자 이름, 비밀번호, 머신 이름 및/또는 민감한 파일 위치 등과 같이 웹 애플리케이션에 대한 민감한 정보를 모으는 것이 가능합니다.</p>

<p>속기 쉬운 사용자를 설득해서 사용자 이름, 비밀번호, 신용카드 번호, 주민등록 번호와 같은 민감한 정보를 제공하도록 하는 것이 가능합니다.</p>

<p>참조:</p>

<p><a href="https://www.owasp.org/index.php/HTTP_Strict_Transport_Security" rel="nofollow" target="_blank">OWASP "HTTP Strict Transport Security"</a></p>

<p><a href="http://tools.ietf.org/html/rfc6797" rel="nofollow" target="_blank">HSTS 스펙</a></p>

<p>기술적 설명:</p>

<p>HSTS(HTTP Strict Transport Security)는 보안(HTTPS) 웹 사이트가 비보안 HTTP로 다운그레이드되지 않도록 보호하는 메커니즘입니다.</p>

<p>이 메커니즘을 통해 웹 서버는 해당 클라이언트(웹 브라우저 또는 기타 사용자 에이전트)에 서버와 상호작용할 때 보안 HTTPS 연결을 사용하고 비보안 HTTP 프토토콜을 사용하지 않도록 지시할 수 있습니다.</p>

<p>HTTP Strict Transport Security 정책은 "Strict-Transport-Security"라는 응답 헤더를 사용하여 서버에 의해 해당 클라이언트로 전달됩니다.</p>

<p>이 헤더의 값은 클라이언트가 HTTPS로만 서버에 액세스해야 하는 기간입니다.</p>

<p>기타 헤더 속성에는 "includeSubDomains" 및 "preload"가 포함됩니다</p>

<p>사이트 전체를 HTTPS 연결을 사용하고 있는 경우.
"이 사이트는 오직 HTTPS 연결만 지원합니다" 라고 알릴 수 있습니다.
이렇게 알려진 경우 브라우저가 해당 설정을 기억하여 http로 접속시 스킵하고 https 로 이동할 수 있으며, http/https 양쪽이 세션을 공유하고 있을때 취약점도 커버 할 수 있습니다.
그 알림을 HTTP Strict Transport Security (이하 HSTS) 라고 부릅니다.</p>

<p>적용:</p>

<ul>
<li><p>XSS 필터 설정이 필요한 페이지에서 응답을 보낼 때 값을 지정하여 반환(단, 개발과정이나 조치 과정에서 일일이 설정해야 하는 번거로움이 있음)</p></li>
<li>
<p>웹 서버의 환경설정에서 응답시 해더에 자동으로 추가하여 반환하도록 하기 (전체 적용).</p>

<ul>
<li>nginx.conf</li>
</ul>

<p><a href="https://www.nginx.com/blog/http-strict-transport-security-hsts-and-nginx/" rel="nofollow" target="_blank">nginx 설정하기</a>, add_header 상속 주의하기</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">...<span class="o">(</span>생략<span class="o">)</span>...

server <span class="o">{</span>
  listen 80 default_server<span class="p">;</span>
  ...<span class="o">(</span>생략<span class="o">)</span>...
<span class="o">}</span>

server <span class="o">{</span>
  listen 443 ssl http2<span class="p">;</span>
  ...<span class="o">(</span>생략<span class="o">)</span>...
  add_header Strict-Transport-Security <span class="s2">"max-age=31536000; includeSubDomains; preload"</span><span class="p">;</span>
  ...<span class="o">(</span>생략<span class="o">)</span>...
<span class="o">}</span>
</code></pre></div>
</li>
</ul>

<h3 id="reference">Reference</h3>

<p><a href="https://gist.github.com/plentz/6737338" rel="nofollow" target="_blank">https://gist.github.com/plentz/6737338</a></p>

<p><a href="https://gs.saro.me/#!m=elec&amp;jn=712" rel="nofollow" target="_blank">https://gs.saro.me/#!m=elec&amp;jn=712</a></p>

<hr>

<h2 id="part-61c86b8f4e5a09a7">본문 매개변수가 조회에서 허용됨</h2>

<p>source 중 정보는 전부 은닉(backend 처리등)하기</p>

<hr>

<h2 id="python-file-download">python file download</h2>

<p>URL 호출시 <code>/download&amp;file_name=/etc/passwd</code> 하면 download 되는 현상</p>

<p>재연:</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">os</span>

<span class="n">file_name</span> <span class="o">=</span> <span class="s">'/etc/passwd'</span>  <span class="c1"># ../../etc/passwd 등
</span><span class="n">file_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">'/home/mkkim/download'</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
<span class="k">print</span> <span class="n">file_name</span>
<span class="c1"># /etc/passwd 가 출력
</span></code></pre></div>
<p>수정:</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">if</span> <span class="n">file_name</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">'/'</span><span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
    <span class="k">return</span> <span class="bp">False</span>
</code></pre></div>
<hr>

<h2 id="nginx-error-page">NGINX error Page</h2>

<p>Status 404, 403 등 Error 시 nginx 에서 기본 error.html 말고 Page 의 처음으로 이동하기</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">...<span class="o">(</span>생략<span class="o">)</span>...
<span class="o">{</span>
    ...<span class="o">(</span>생략<span class="o">)</span>...

    error_page  404 403 500 502 503 504 /50x.html<span class="p">;</span>
    location <span class="o">=</span> /50x.html <span class="o">{</span>
        rewrite .<span class="k">*</span> / permanent<span class="p">;</span>
        <span class="c"># root   /usr/share/nginx/html;</span>
    <span class="o">}</span>

    fastcgi_intercept_errors on<span class="p">;</span>

    ...<span class="o">(</span>생략<span class="o">)</span>...
<span class="o">}</span>
</code></pre></div>
<h3 id="reference">Reference</h3>

<p><a href="https://www.phpschool.com/gnuboard4/bbs/board.php?bo_table=qna_install&amp;wr_id=114871" rel="nofollow" target="_blank">https://www.phpschool.com/gnuboard4/bbs/board.php?bo_table=qna_install&amp;wr_id=114871</a></p>

<hr>

<h2 id="password">Password 복잡도</h2>

<p>Source level 에서 수정하기 (생략)</p>

<hr>

<h2 id="browser-exploit-against-ssl-tls-beast">Browser Exploit Against SSL/TLS(BEAST)</h2>

<p>보안 위험:</p>

<p>합법적인 사용자로 위장하는 데 사용될 수 있는 고객 세션 및 쿠키를 빼내거나 조작하는 것이 가능하여 해커가 사용자 레코드를 보거나 변경할 수 있으며 해당 사용자처럼 트랜잭션을 수행할 수 있습니다.</p>

<p><a href="https://blog.qualys.com/ssllabs/2013/09/10/is-beast-still-a-threat" rel="nofollow" target="_blank">Is BEAST Still a Threat?</a></p>

<p><a href="http://securitystreetknowledge.com/?p=882" rel="nofollow" target="_blank">SSL Beast - SSL Assessments and How to Fix</a></p>

<p>기술적 설명:</p>

<p>TLS 1.0 및 이전 버전에서는 블록 암호 암호화의 초기화 벡터를 예측할 수 있습니다. 중간자 공격자는 이를 통해 암호 화되는 일반 텍스트를 추정할 수 있습니다. 공격자가 IV를 예측하고 암호화된 데이터를 점검하고 암호화할 텍스트를 삽입할 수 있는 경우, 공격자는 암호화된 민 감한 일반 텍스트를 추정하고 추정이 올바른지 여부를 확인할 수 있습니다. 기술적으로는 공격자가 암호화된 데이터를 복호화할 수 없지만 암호화된 추정을 충분히 점검하면 결국 민감한 정보의 값을 알아낼 수 있습니다.</p>

<p>BEAST(Browser Exploit Against SSL/TLS)는 SSL 3.0의 취약점을 공격한다. 이 취약점은 엔드 유저 브라우저에서 HTTPS의 쿠키들을 해독하고 효과적으로 타깃의 세션을 하이제킹 할 수 있는 취약점이다.</p>

<p>TIM은 시큐리티 전문가들로 구성된 테스크 포스를 구성하고 SSL과 CA 시스템에서 수정돼야 할 이슈들을 리뷰하고 있다. 특히 CA(인증기관, Certificate Authorities)들은 지난 몇 년간 해커들이 사기 인증서를 발급하도록 허용했고 해킹공격으로 인증기관 가운데 하나인 DigiNotar는 파산했다.</p>

<p>공격에 대한 취약점은 TLS 프로토콜 버전 1.1에서 수정됐다. 그러나 많은 서버들이 오래된 버전이나 취약한 프로토콜인 SSL 3.0과 같은 버전을 사용하고 있다. 이러한 서버들은 SSL 다운그레이드 공격에 취약하다. 이 공격은 클라이언트가 시큐어한 버전을 지원한다 할 지라도 SSL/TLS의 취약한 버전을 사용하도록 속일 수 있다.</p>

<h3 id="part-42e3e6859ab0afd6">수정 권장 사항</h3>

<p>CBC를 사용하는 SSLv3/TLS1.0 암호 스위트 지원을 제거하십시오.</p>

<p>자세한 정보를 보려면 <a href="http://disablessl3.com/" rel="nofollow" target="_blank">http://disablessl3.com/</a> 링크의 내용을 참조하십시오.</p>

<h3 id="web-server">Web Server</h3>

<h4 id="nginx">Nginx</h4>

<p><code>ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</code> 추가하기</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">http <span class="o">{</span>
    ...<span class="o">(</span>생략<span class="o">)</span>...

    server <span class="o">{</span>
        ...<span class="o">(</span>생략<span class="o">)</span>...

        listen 443<span class="p">;</span>

        ...<span class="o">(</span>생략<span class="o">)</span>...
        ssl                 on<span class="p">;</span>
        ssl_certificate     /home/my/etc/sslkey/server.crt<span class="p">;</span>
        ssl_certificate_key /home/my/etc/sslkey/private.key<span class="p">;</span>
        ssl_session_timeout  20m<span class="p">;</span>

        ssl_protocols TLSv1 TLSv1.1 TLSv1.2<span class="p">;</span>

        ...<span class="o">(</span>생략<span class="o">)</span>...
    <span class="o">}</span>
    ...<span class="o">(</span>생략<span class="o">)</span>...
<span class="o">}</span>
</code></pre></div>
<h3 id="reference">Reference</h3>

</div>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/blog/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Portal2312&#39;s blog</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Portal2312&#39;s blog</li><li><a class="u-email" href="mailto:portal2312@gmail.com">portal2312@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/portal2312"><svg class="svg-icon"><use xlink:href="/blog/assets/minima-social-icons.svg#github"></use></svg> <span class="username">portal2312</span></a></li><li><a href="https://www.twitter.com/portal2312"><svg class="svg-icon"><use xlink:href="/blog/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">portal2312</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Welcome to my blog.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
