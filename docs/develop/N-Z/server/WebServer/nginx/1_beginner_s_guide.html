<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Beginner&#39;s Guild | Portal2312&#39;s blog</title>
<meta name="generator" content="Jekyll v3.8.6" />
<meta property="og:title" content="Beginner&#39;s Guild" />
<meta name="author" content="mkkim" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="nginx를 시작하고 중지하는 방법을 설명." />
<meta property="og:description" content="nginx를 시작하고 중지하는 방법을 설명." />
<link rel="canonical" href="/blog/docs/develop/N-Z/server/WebServer/nginx/1_beginner_s_guide.html" />
<meta property="og:url" content="/blog/docs/develop/N-Z/server/WebServer/nginx/1_beginner_s_guide.html" />
<meta property="og:site_name" content="Portal2312&#39;s blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-12-02T16:38:51+09:00" />
<script type="application/ld+json">
{"description":"nginx를 시작하고 중지하는 방법을 설명.","headline":"Beginner&#39;s Guild","dateModified":"2019-12-02T16:38:51+09:00","datePublished":"2019-12-02T16:38:51+09:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"/blog/docs/develop/N-Z/server/WebServer/nginx/1_beginner_s_guide.html"},"url":"/blog/docs/develop/N-Z/server/WebServer/nginx/1_beginner_s_guide.html","author":{"@type":"Person","name":"mkkim"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href='/blog/assets/main.css'><link type="application/atom+xml" rel="alternate" href="/blog/feed.xml" title="Portal2312's blog" /><script>
if(!(window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1")) {
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-113063601-1', 'auto');
  ga('send', 'pageview');
}
</script>
  
<script src='/blog/dist/js/common.bundle.js'></script>
</head>
<body><header class="site-header" role="banner">
  <div class="wrapper">
    <a class="site-title" rel="author" href="/blog/">Portal2312&#39;s blog</a>
    <nav class="site-nav">
    <input type="checkbox" id="nav-trigger" class="nav-trigger" />
    <label for="nav-trigger">
      <span class="menu-icon">
        <svg viewBox="0 0 18 15" width="18px" height="15px">
          <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
        </svg>
      </span>
    </label>

    <div class="trigger"><a class="page-link" href="/blog/about.html">
            About
          </a><a class="page-link" href="/blog/posts.html">
            Posts
          </a><a class="page-link" href="/blog/history.html">
            History
          </a><a class="page-link" href="/blog/docs/index.html">
            Docs
          </a></div>
  </nav>
  </div>
  <div class="scroll-indicator-container">
  <div class="scroll-indicator-bar" id="scrollIndicatorBar"></div>
</div>

</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <h1>Beginner's Guild</h1>

  <div>
    <h2>Table of contents</h2>
    <ul class="section-nav">
<li class="toc-entry toc-h2"><a href="#starting-stopping-and-reloading-configuration">Starting, Stopping, and Reloading Configuration</a></li>
<li class="toc-entry toc-h2"><a href="#configuration-files-systems">Configuration Files systems (구성 파일의 구조)</a></li>
<li class="toc-entry toc-h2"><a href="#serving-static-content">Serving Static Content (정적 콘텐츠 제공)</a></li>
<li class="toc-entry toc-h2"><a href="#setting-up-a-simple-proxy-server">Setting Up a Simple Proxy Server (간단한 프록시 서버 설정)</a></li>
<li class="toc-entry toc-h2"><a href="#setting-up-fastcgi-proxying-fastcgi">Setting Up FastCGI Proxying (FastCGI 프록시 설정)</a></li>
</ul><p>nginx를 시작하고 중지하는 방법을 설명.</p>

<p>구성을 설명하고 구성 파일의 구조를 설명하고 정적 컨텐츠를 제공하도록 nginx를 설정하는 방법, 프록시 서버로 nginx를 구성하는 방법 및 FastCGI 응용 프로그램과 연결하는 방법에 대해 설명.</p>

<p><strong>Processes</strong></p>

<p>nginx에는 하나의 master 프로세스와 여러 worker 프로세스가 있음.</p>

<ul>
<li><p>master 프로세스의 주 목적은 구성을 읽고 평가하고 작업자 프로세스를 유지 관리하는 것.</p></li>
<li><p>worker 프로세스는 실제 요청 처리를 수행함.</p></li>
</ul>

<p>이벤트 기반 모델 및 OS 종속 메커니즘을 사용하여 작업자 프로세스간에 요청을 효율적으로 배포함.</p>

<p>worker 프로세스의 수는 구성 파일에 정의되어 있으며 주어진 구성에 따라 고정되거나 사용 가능한 CPU 코어의 수에 맞게 자동 조정 가능. (참조: <strong>worker_processes</strong>).</p>

<p><strong>.conf</strong></p>

<p>nginx와 그 모듈이 작동하는 방식은 설정 파일에서 결정됨.</p>

<ul>
<li><p>기본 구성 파일명: nginx.conf</p></li>
<li><p>경로: /usr/local/nginx/conf, /etc/nginx 또는 /usr/local/etc/nginx 에 있음.</p></li>
</ul>

<h2 id="starting-stopping-and-reloading-configuration">
<a class="anchor" href="#starting-stopping-and-reloading-configuration" aria-hidden="true"><span class="octicon octicon-link"></span></a>Starting, Stopping, and Reloading Configuration</h2>

<h2 id="configuration-files-systems">
<a class="anchor" href="#configuration-files-systems" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configuration Files systems (구성 파일의 구조)</h2>

<p>nginx는 구성 파일에 지정된 지시어로 제어되는 모듈로 구성됩니다.</p>

<p>지시문은 간단한 지시문과 블록 지시문으로 나뉩니다.</p>

<p>간단한 지시문은 이름과 매개 변수를 공백으로 구분하고 <code>;</code>(세미콜론)으로 끝납니다.</p>

<p>블록 지시문은 간단한 지시문과 동일한 구조를 갖지만 세미콜론 대신 중괄호 ({및})로 묶인 일련의 추가 명령어로 끝납니다. 블록 지시.이 중} 호 안에 다른 지시.을 가질 수있는 경우, 이는 A 텍스트 (예:이벤트, http, 서 v W 위치)라고합니다.</p>

<p>컨텍스트 외부의 구성 파일에 배치 된 지시문은 주 컨텍스트에있는 것으로 간주됩니다.</p>

<p>이벤트 및 http 지정 문은 주 컨텍스트, http의 서버 및 server의 위치에 있습니다.</p>

<p><code>#</code> 기호 다음의 나머지 줄은 주석으로 간주됩니다.</p>

<h2 id="serving-static-content">
<a class="anchor" href="#serving-static-content" aria-hidden="true"><span class="octicon octicon-link"></span></a>Serving Static Content (정적 콘텐츠 제공)</h2>

<p>중요한 웹 서버 작업은 파일 (예: 이미지 또는 정적 HTML 페이지)을 제공하는 것입니다.</p>

<p>요청에 따라 /data/www (HTML 파일을 포함 할 수도 있음) 및 /data/images (이미지 포함)의 서로 다른 로컬 디렉토리에서 파일을 제공하는 예제를 구현합니다.</p>

<p>이렇게 하려면 두 개의 [location block]을 사용하여 구성 파일을 편집하고 [http block] 내부에 [server block]을 설정해야 합니다.</p>

<p>먼저 /Data/www 디렉토리를 만들고 텍스트 내용이 포함 된 index.html 파일을 넣은 다음 /data/ images 디렉토리를 만들어 이미지를 넣습니다.</p>

<p>그런 다음, 구성 파일을 엽니다. 기본 구성 파일에는 이미 주석 처리 된 여러 가지 [server block] 예제가 포함되어 있습니다. 이제는 이러한 모든 블록을 주석 처리하고 새 [server block]을 시작하십시오:</p>
<div class="highlight"><pre><code class="language-" data-lang="">http {
    server {
    }
}
</code></pre></div>
<p>일반적으로 구성 파일에는 서버가 수신하는 포트와 서버 이름으로 구별되는 여러 [server block]이 포함될 수 있습니다. nginx는 요청을 처리하는 서버를 결정하면 요청의 헤더에 지정된 URI를 [server block] 내부에 정의 된 위치 지정 문 매개 변수와 비교하여 테스트합니다.</p>

<p>다음 [location block]을 [server block]에 추가하십시오:</p>
<div class="highlight"><pre><code class="language-" data-lang="">location / {
    root /data/www;
}
</code></pre></div>
<p>이 [location block]은 요청의 URI와 비교되는 <code>/</code> 접두어를 지정합니다.
일치하는 요청의 경우 URI는 로컬 파일 시스템에서 요청 된 파일에 대한 경로를 형성하기 위해 root 지시문에 지정된 경로, 즉 /data/www에 추가됩니다. 일치하는 [location block]이 여러 개인 경우 nginx는 가장 긴 접두어가있는 [location block]을 선택합니다. 위의 [location block]은 길이가 1 인 가장 짧은 접두어를 제공하므로 다른 모든 [location block]이 일치를 제공하지 못하는 경우에만이 블록이 사용됩니다.</p>

<p>다음, 두 번째 [location block] 추가:</p>
<div class="highlight"><pre><code class="language-" data-lang="">location /images/ {
    root /data;
}
</code></pre></div>
<p>/images/ (location /은 이러한 요청과 일치하지만 접두어가 더 짧음)로 시작하는 요청과 일치합니다.</p>

<p>[server block]의 결과 구성은 다음과 같음:</p>
<div class="highlight"><pre><code class="language-" data-lang="">server {
    location / {
        root /data/www;
    }

    location /images/ {
        root /data;
    }
}
</code></pre></div>
<p>이것은 이미 표준 포트 80에서 수신하고 http:// localhost /의 로컬 시스템에서 액세스 할 수있는 서버의 작동 구성입니다. /images/로 시작하는 URI가있는 요청에 대한 응답으로 서버는 /data/images 디렉토리에서 파일을 보냅니다.
예를 들어 <a href="http://localhost/images/example.png">http://localhost/images/example.png</a> 요청에 대한 응답으로 nginx는 /data/images/example.png 파일을 보내십시오.
해당 파일이 없으면 nginx는 404 오류를 나타내는 응답을 보냅니다. /images/로 시작하지 않는 URI가있는 요청은 /data/www 디렉토리에 매핑됩니다.
예를 들어, <a href="http://localhost/some/example.html">http://localhost/some/example.html</a> 요청에 대한 응답으로 nginx는 /data/www/some/example.html 파일을 보냅니다.</p>

<p>새 구성을 적용하려면 nginx가 아직 시작되지 않았으면 시작하거나 nginx의 master 프로세스에 다시로드 신호를 보내십시오:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">nginx <span class="nt">-s</span> reload
</code></pre></div><div class="highlight"><pre><code class="language-" data-lang="">예상대로 작동하지 않는 경우
access.log 및 error.log 파일에서
/usr/local/nginx /logs 또는 /var/log/nginx 디렉토리에있는 이유를 찾아보십시오.
</code></pre></div>
<h2 id="setting-up-a-simple-proxy-server">
<a class="anchor" href="#setting-up-a-simple-proxy-server" aria-hidden="true"><span class="octicon octicon-link"></span></a>Setting Up a Simple Proxy Server (간단한 프록시 서버 설정)</h2>

<p>nginx를 자주 사용하는 방법 중 하나는 프록시 서버로 설정하는 것입니다. 프록시 서버는 요청을 받고 프록시 서버에 전달하고 응답을 검색 한 다음 클라이언트에게 보냅니다.</p>

<p>로컬 디렉토리에있는 파일로 이미지 요청을 처리하고 다른 모든 요청을 프록시 서버로 보내는 기본 프록시 서버를 구성합니다. 이 예제에서 두 서버는 단일 nginx 인스턴스에 정의됩니다.</p>

<p>먼저 다음 내용으로 nginx 구성 파일에 [server block]을 하나 더 추가하여 프록시 서버를 정의하십시오:</p>
<div class="highlight"><pre><code class="language-" data-lang="">server {
    listen 8080;
    root /data/up1;

    location / {
    }
}
</code></pre></div>
<p>이것은 포트 8080에서 수신하는 간단한 서버가 될 것이며 (이전에는 표준 포트 80이 사용 되었기 때문에 <code>listen</code> 지시어가 지정되지 않았음) 모든 요청을 로컬 파일 시스템의 /data/up1 디렉토리에 매핑합니다.</p>

<p>이 디렉토리를 만들고 index.html 파일을 그 안에 넣습니다.
root 지시문은 서버 컨텍스트에 배치됩니다. 이러한 root 지시문은 요청을 처리하도록 선택된 [location block]에 자체 root 지시문이 포함되지 않은 경우 사용됩니다.</p>

<p>그런 다음 이전 섹션의 서버 구성을 사용하여 프록시 서버 구성이되도록 수정하십시오. 첫 번째 [location block]에서 매개 변수에 지정된 프록시 서버의 프로토콜, 이름 및 포트와 함께 <code>proxy_pass</code> 지정 문을 입력하십시오 (여기서는 <a href="http://localhost:8080">http://localhost:8080</a>).</p>
<div class="highlight"><pre><code class="language-" data-lang="">server {
    location / {
        proxy_pass http://localhost:8080;
    }

    location /images/ {
        root /data;
    }
}
</code></pre></div>
<p>현재 /images/ 접두사가 있는 요청을 /data/images 디렉토리 아래의 파일로 매핑하는 두 번째 [location block]을 수정하여 일반적인 파일 확장명을 가진 이미지 요청과 일치하게 만듭니다.</p>

<p>수정된 [location block]은 다음과 같습니다:</p>
<div class="highlight"><pre><code class="language-" data-lang="">location ~ \.(gif|jpg|png)$ {
    root /data/images;
}
</code></pre></div>
<p>이 매개 변수는 .gif, .jpg 또는 .png로 끝나는 모든 URI와 일치하는 정규 표현식입니다. 정규 표현식 앞에는 ~가 와야합니다. 해당 요청은 / data / images 디렉토리에 맵핑됩니다.</p>

<p>nginx는 요청을 처리 할 위치 블록을 선택할 때 접두어를 지정하고 가장 긴 접두사가있는 위치를 기억 한 다음 정규 표현식을 검사하는 위치 지정 문을 먼저 검사합니다. 정규식과 일치하는 것이 있으면 nginx가이 위치를 선택하거나 그렇지 않으면 이전에 기억 된 위치를 선택합니다.</p>

<p>프록시 서버의 결과 구성은 다음과 같습니다:</p>
<div class="highlight"><pre><code class="language-" data-lang="">server {
    location / {
        proxy_pass http://localhost:8080/;
    }

    location ~ \.(gif|jpg|png)$ {
        root /data/images;
    }
}
</code></pre></div>
<p>이 서버는 .gif, .jpg 또는 .png로 끝나는 요청을 필터링하고 루트 지시어 매개 변수에 URI를 추가하여 / data / images 디렉토리에 매핑 한 다음 위의 구성된 프록시 서버로 다른 모든 요청을 전달합니다.</p>

<p>새 설정을 적용하려면 이전 섹션에서 설명한대로 nginx에 다시로드 신호를 보냅니다.</p>

<p>프록시 연결을 추가로 구성하는 데 사용할 수있는 더 많은 지시문이 있습니다.</p>

<h2 id="setting-up-fastcgi-proxying-fastcgi">
<a class="anchor" href="#setting-up-fastcgi-proxying-fastcgi" aria-hidden="true"><span class="octicon octicon-link"></span></a>Setting Up FastCGI Proxying (FastCGI 프록시 설정)</h2>

<p>nginx는 PHP와 같은 다양한 프레임 워크 및 프로그래밍 언어로 작성된 응용 프로그램을 실행하는 FastCGI 서버로 요청을 라우팅하는 데 사용할 수 있습니다.</p>

<p>FastCGI 서버와 함께 작동하는 가장 기본적인 nginx 구성에는 <code>proxy_pass</code> 지정 문 대신 <code>fastcgi_pass</code> 지정 문을 사용하고 FastCGI 서버로 전달되는 매개 변수를 설정하는 <code>fastcgi_param</code> 지정 문을 사용하는 것이 포함됩니다.
localhost:9000 에서 FastCGI 서버에 액세스 할 수 있다고 가정합니다.
이전 절의 프록시 구성을 기초로 <code>proxy_pass</code> 지시문을 <code>fastcgi_pass</code> 지시문으로 바꾸고 매개 변수를 localhost:9000 으로 변경합니다.
PHP 에서 <code>SCRIPT_FILENAME</code> 매개 변수는 스크립트 이름을 결정하는 데 사용되고 <code>QUERY_STRING</code> 매개 변수는 요청 매개 변수를 전달하는 데 사용됩니다.</p>

<p>결과 구성은 다음과 같습니다:</p>
<div class="highlight"><pre><code class="language-" data-lang="">server {
    location / {
        fastcgi_pass  localhost:9000;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        fastcgi_param QUERY_STRING    $query_string;
    }

    location ~ \.(gif|jpg|png)$ {
        root /data/images;
    }
}
</code></pre></div>
<p>이렇게하면 고정 이미지 요청을 제외한 모든 요청을 FastCGI 프로토콜을 통해 localhost:9000 에서 작동하는 프록시 서버로 라우팅하는 서버가 설정됩니다.</p>

  </div>

<div>
  <p>nginx를 시작하고 중지하는 방법을 설명.</p>

<p>구성을 설명하고 구성 파일의 구조를 설명하고 정적 컨텐츠를 제공하도록 nginx를 설정하는 방법, 프록시 서버로 nginx를 구성하는 방법 및 FastCGI 응용 프로그램과 연결하는 방법에 대해 설명.</p>

<p><strong>Processes</strong></p>

<p>nginx에는 하나의 master 프로세스와 여러 worker 프로세스가 있음.</p>

<ul>
<li><p>master 프로세스의 주 목적은 구성을 읽고 평가하고 작업자 프로세스를 유지 관리하는 것.</p></li>
<li><p>worker 프로세스는 실제 요청 처리를 수행함.</p></li>
</ul>

<p>이벤트 기반 모델 및 OS 종속 메커니즘을 사용하여 작업자 프로세스간에 요청을 효율적으로 배포함.</p>

<p>worker 프로세스의 수는 구성 파일에 정의되어 있으며 주어진 구성에 따라 고정되거나 사용 가능한 CPU 코어의 수에 맞게 자동 조정 가능. (참조: <strong>worker_processes</strong>).</p>

<p><strong>.conf</strong></p>

<p>nginx와 그 모듈이 작동하는 방식은 설정 파일에서 결정됨.</p>

<ul>
<li><p>기본 구성 파일명: nginx.conf</p></li>
<li><p>경로: /usr/local/nginx/conf, /etc/nginx 또는 /usr/local/etc/nginx 에 있음.</p></li>
</ul>

<h2 id="starting-stopping-and-reloading-configuration">Starting, Stopping, and Reloading Configuration</h2>

<h2 id="configuration-files-systems">Configuration Files systems (구성 파일의 구조)</h2>

<p>nginx는 구성 파일에 지정된 지시어로 제어되는 모듈로 구성됩니다.</p>

<p>지시문은 간단한 지시문과 블록 지시문으로 나뉩니다.</p>

<p>간단한 지시문은 이름과 매개 변수를 공백으로 구분하고 <code>;</code>(세미콜론)으로 끝납니다.</p>

<p>블록 지시문은 간단한 지시문과 동일한 구조를 갖지만 세미콜론 대신 중괄호 ({및})로 묶인 일련의 추가 명령어로 끝납니다. 블록 지시.이 중} 호 안에 다른 지시.을 가질 수있는 경우, 이는 A 텍스트 (예:이벤트, http, 서 v W 위치)라고합니다.</p>

<p>컨텍스트 외부의 구성 파일에 배치 된 지시문은 주 컨텍스트에있는 것으로 간주됩니다.</p>

<p>이벤트 및 http 지정 문은 주 컨텍스트, http의 서버 및 server의 위치에 있습니다.</p>

<p><code>#</code> 기호 다음의 나머지 줄은 주석으로 간주됩니다.</p>

<h2 id="serving-static-content">Serving Static Content (정적 콘텐츠 제공)</h2>

<p>중요한 웹 서버 작업은 파일 (예: 이미지 또는 정적 HTML 페이지)을 제공하는 것입니다.</p>

<p>요청에 따라 /data/www (HTML 파일을 포함 할 수도 있음) 및 /data/images (이미지 포함)의 서로 다른 로컬 디렉토리에서 파일을 제공하는 예제를 구현합니다.</p>

<p>이렇게 하려면 두 개의 [location block]을 사용하여 구성 파일을 편집하고 [http block] 내부에 [server block]을 설정해야 합니다.</p>

<p>먼저 /Data/www 디렉토리를 만들고 텍스트 내용이 포함 된 index.html 파일을 넣은 다음 /data/ images 디렉토리를 만들어 이미지를 넣습니다.</p>

<p>그런 다음, 구성 파일을 엽니다. 기본 구성 파일에는 이미 주석 처리 된 여러 가지 [server block] 예제가 포함되어 있습니다. 이제는 이러한 모든 블록을 주석 처리하고 새 [server block]을 시작하십시오:</p>
<div class="highlight"><pre><code class="language-" data-lang="">http {
    server {
    }
}
</code></pre></div>
<p>일반적으로 구성 파일에는 서버가 수신하는 포트와 서버 이름으로 구별되는 여러 [server block]이 포함될 수 있습니다. nginx는 요청을 처리하는 서버를 결정하면 요청의 헤더에 지정된 URI를 [server block] 내부에 정의 된 위치 지정 문 매개 변수와 비교하여 테스트합니다.</p>

<p>다음 [location block]을 [server block]에 추가하십시오:</p>
<div class="highlight"><pre><code class="language-" data-lang="">location / {
    root /data/www;
}
</code></pre></div>
<p>이 [location block]은 요청의 URI와 비교되는 <code>/</code> 접두어를 지정합니다.
일치하는 요청의 경우 URI는 로컬 파일 시스템에서 요청 된 파일에 대한 경로를 형성하기 위해 root 지시문에 지정된 경로, 즉 /data/www에 추가됩니다. 일치하는 [location block]이 여러 개인 경우 nginx는 가장 긴 접두어가있는 [location block]을 선택합니다. 위의 [location block]은 길이가 1 인 가장 짧은 접두어를 제공하므로 다른 모든 [location block]이 일치를 제공하지 못하는 경우에만이 블록이 사용됩니다.</p>

<p>다음, 두 번째 [location block] 추가:</p>
<div class="highlight"><pre><code class="language-" data-lang="">location /images/ {
    root /data;
}
</code></pre></div>
<p>/images/ (location /은 이러한 요청과 일치하지만 접두어가 더 짧음)로 시작하는 요청과 일치합니다.</p>

<p>[server block]의 결과 구성은 다음과 같음:</p>
<div class="highlight"><pre><code class="language-" data-lang="">server {
    location / {
        root /data/www;
    }

    location /images/ {
        root /data;
    }
}
</code></pre></div>
<p>이것은 이미 표준 포트 80에서 수신하고 http:// localhost /의 로컬 시스템에서 액세스 할 수있는 서버의 작동 구성입니다. /images/로 시작하는 URI가있는 요청에 대한 응답으로 서버는 /data/images 디렉토리에서 파일을 보냅니다.
예를 들어 <a href="http://localhost/images/example.png" rel="nofollow" target="_blank">http://localhost/images/example.png</a> 요청에 대한 응답으로 nginx는 /data/images/example.png 파일을 보내십시오.
해당 파일이 없으면 nginx는 404 오류를 나타내는 응답을 보냅니다. /images/로 시작하지 않는 URI가있는 요청은 /data/www 디렉토리에 매핑됩니다.
예를 들어, <a href="http://localhost/some/example.html" rel="nofollow" target="_blank">http://localhost/some/example.html</a> 요청에 대한 응답으로 nginx는 /data/www/some/example.html 파일을 보냅니다.</p>

<p>새 구성을 적용하려면 nginx가 아직 시작되지 않았으면 시작하거나 nginx의 master 프로세스에 다시로드 신호를 보내십시오:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">nginx <span class="nt">-s</span> reload
</code></pre></div><div class="highlight"><pre><code class="language-" data-lang="">예상대로 작동하지 않는 경우
access.log 및 error.log 파일에서
/usr/local/nginx /logs 또는 /var/log/nginx 디렉토리에있는 이유를 찾아보십시오.
</code></pre></div>
<h2 id="setting-up-a-simple-proxy-server">Setting Up a Simple Proxy Server (간단한 프록시 서버 설정)</h2>

<p>nginx를 자주 사용하는 방법 중 하나는 프록시 서버로 설정하는 것입니다. 프록시 서버는 요청을 받고 프록시 서버에 전달하고 응답을 검색 한 다음 클라이언트에게 보냅니다.</p>

<p>로컬 디렉토리에있는 파일로 이미지 요청을 처리하고 다른 모든 요청을 프록시 서버로 보내는 기본 프록시 서버를 구성합니다. 이 예제에서 두 서버는 단일 nginx 인스턴스에 정의됩니다.</p>

<p>먼저 다음 내용으로 nginx 구성 파일에 [server block]을 하나 더 추가하여 프록시 서버를 정의하십시오:</p>
<div class="highlight"><pre><code class="language-" data-lang="">server {
    listen 8080;
    root /data/up1;

    location / {
    }
}
</code></pre></div>
<p>이것은 포트 8080에서 수신하는 간단한 서버가 될 것이며 (이전에는 표준 포트 80이 사용 되었기 때문에 <code>listen</code> 지시어가 지정되지 않았음) 모든 요청을 로컬 파일 시스템의 /data/up1 디렉토리에 매핑합니다.</p>

<p>이 디렉토리를 만들고 index.html 파일을 그 안에 넣습니다.
root 지시문은 서버 컨텍스트에 배치됩니다. 이러한 root 지시문은 요청을 처리하도록 선택된 [location block]에 자체 root 지시문이 포함되지 않은 경우 사용됩니다.</p>

<p>그런 다음 이전 섹션의 서버 구성을 사용하여 프록시 서버 구성이되도록 수정하십시오. 첫 번째 [location block]에서 매개 변수에 지정된 프록시 서버의 프로토콜, 이름 및 포트와 함께 <code>proxy_pass</code> 지정 문을 입력하십시오 (여기서는 <a href="http://localhost:8080" rel="nofollow" target="_blank">http://localhost:8080</a>).</p>
<div class="highlight"><pre><code class="language-" data-lang="">server {
    location / {
        proxy_pass http://localhost:8080;
    }

    location /images/ {
        root /data;
    }
}
</code></pre></div>
<p>현재 /images/ 접두사가 있는 요청을 /data/images 디렉토리 아래의 파일로 매핑하는 두 번째 [location block]을 수정하여 일반적인 파일 확장명을 가진 이미지 요청과 일치하게 만듭니다.</p>

<p>수정된 [location block]은 다음과 같습니다:</p>
<div class="highlight"><pre><code class="language-" data-lang="">location ~ \.(gif|jpg|png)$ {
    root /data/images;
}
</code></pre></div>
<p>이 매개 변수는 .gif, .jpg 또는 .png로 끝나는 모든 URI와 일치하는 정규 표현식입니다. 정규 표현식 앞에는 ~가 와야합니다. 해당 요청은 / data / images 디렉토리에 맵핑됩니다.</p>

<p>nginx는 요청을 처리 할 위치 블록을 선택할 때 접두어를 지정하고 가장 긴 접두사가있는 위치를 기억 한 다음 정규 표현식을 검사하는 위치 지정 문을 먼저 검사합니다. 정규식과 일치하는 것이 있으면 nginx가이 위치를 선택하거나 그렇지 않으면 이전에 기억 된 위치를 선택합니다.</p>

<p>프록시 서버의 결과 구성은 다음과 같습니다:</p>
<div class="highlight"><pre><code class="language-" data-lang="">server {
    location / {
        proxy_pass http://localhost:8080/;
    }

    location ~ \.(gif|jpg|png)$ {
        root /data/images;
    }
}
</code></pre></div>
<p>이 서버는 .gif, .jpg 또는 .png로 끝나는 요청을 필터링하고 루트 지시어 매개 변수에 URI를 추가하여 / data / images 디렉토리에 매핑 한 다음 위의 구성된 프록시 서버로 다른 모든 요청을 전달합니다.</p>

<p>새 설정을 적용하려면 이전 섹션에서 설명한대로 nginx에 다시로드 신호를 보냅니다.</p>

<p>프록시 연결을 추가로 구성하는 데 사용할 수있는 더 많은 지시문이 있습니다.</p>

<h2 id="setting-up-fastcgi-proxying-fastcgi">Setting Up FastCGI Proxying (FastCGI 프록시 설정)</h2>

<p>nginx는 PHP와 같은 다양한 프레임 워크 및 프로그래밍 언어로 작성된 응용 프로그램을 실행하는 FastCGI 서버로 요청을 라우팅하는 데 사용할 수 있습니다.</p>

<p>FastCGI 서버와 함께 작동하는 가장 기본적인 nginx 구성에는 <code>proxy_pass</code> 지정 문 대신 <code>fastcgi_pass</code> 지정 문을 사용하고 FastCGI 서버로 전달되는 매개 변수를 설정하는 <code>fastcgi_param</code> 지정 문을 사용하는 것이 포함됩니다.
localhost:9000 에서 FastCGI 서버에 액세스 할 수 있다고 가정합니다.
이전 절의 프록시 구성을 기초로 <code>proxy_pass</code> 지시문을 <code>fastcgi_pass</code> 지시문으로 바꾸고 매개 변수를 localhost:9000 으로 변경합니다.
PHP 에서 <code>SCRIPT_FILENAME</code> 매개 변수는 스크립트 이름을 결정하는 데 사용되고 <code>QUERY_STRING</code> 매개 변수는 요청 매개 변수를 전달하는 데 사용됩니다.</p>

<p>결과 구성은 다음과 같습니다:</p>
<div class="highlight"><pre><code class="language-" data-lang="">server {
    location / {
        fastcgi_pass  localhost:9000;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        fastcgi_param QUERY_STRING    $query_string;
    }

    location ~ \.(gif|jpg|png)$ {
        root /data/images;
    }
}
</code></pre></div>
<p>이렇게하면 고정 이미지 요청을 제외한 모든 요청을 FastCGI 프로토콜을 통해 localhost:9000 에서 작동하는 프록시 서버로 라우팅하는 서버가 설정됩니다.</p>

</div>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/blog/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Portal2312&#39;s blog</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Portal2312&#39;s blog</li><li><a class="u-email" href="mailto:portal2312@gmail.com">portal2312@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/portal2312"><svg class="svg-icon"><use xlink:href="/blog/assets/minima-social-icons.svg#github"></use></svg> <span class="username">portal2312</span></a></li><li><a href="https://www.twitter.com/portal2312"><svg class="svg-icon"><use xlink:href="/blog/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">portal2312</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Welcome to my blog.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
